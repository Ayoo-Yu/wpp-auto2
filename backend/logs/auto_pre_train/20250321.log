2025-03-21 16:37:57,656 - 
================================================================================
2025-03-21 16:37:57,656 - >>> 自动训练预测系统启动 <<<
2025-03-21 16:37:57,656 - ================================================================================

2025-03-21 16:37:57,656 - 自动训练预测系统启动
2025-03-21 16:37:57,656 - 今天的日期是: 20250321
2025-03-21 16:37:57,656 - 创建监视线程...
2025-03-21 16:37:57,656 - 启动训练线程...
2025-03-21 16:37:57,657 - 启动预测线程...
2025-03-21 16:37:57,657 - 
================================================================================
2025-03-21 16:37:57,657 - >>> 启动训练监视线程 <<<
2025-03-21 16:37:57,657 - ================================================================================

2025-03-21 16:37:57,657 - 等待线程完成...
2025-03-21 16:37:57,657 - 
================================================================================
2025-03-21 16:37:57,657 - 启动训练监视线程
2025-03-21 16:37:57,658 - >>> 启动预测监视线程 <<<
2025-03-21 16:37:57,658 - ================================================================================

2025-03-21 16:37:57,658 - 训练文件路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_short\20250321.csv
2025-03-21 16:37:57,658 - 启动预测监视线程
2025-03-21 16:37:57,658 - 模型存储目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:37:57,658 - 训练完成标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\20250321_train_done.flag
2025-03-21 16:37:57,658 - 预测数据文件路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv\20250321.csv
2025-03-21 16:37:57,658 - 开始监视 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_short 文件夹以进行训练...
2025-03-21 16:37:57,658 - 模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:37:57,658 - 预测完成标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\results\shortresult\20250321\20250321_predict_done.flag
2025-03-21 16:37:57,658 - 开始监视 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv 文件夹以进行预测...
2025-03-21 16:37:57,658 - ✅ 发现新的训练文件：D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_short\20250321.csv，执行训练...
2025-03-21 16:37:57,659 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:37:57,659 - 
================================================================================
2025-03-21 16:37:57,659 - 未找到best_models目录，检查传统模型文件
2025-03-21 16:37:57,659 - >>> 开始模型训练 <<<
2025-03-21 16:37:57,659 - ================================================================================

2025-03-21 16:37:57,659 - 未找到任何可用模型文件
2025-03-21 16:37:57,659 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-21 16:37:57,659 - 配置信息:
2025-03-21 16:37:57,659 -   - 窗口大小: 16
2025-03-21 16:37:57,659 -   - 滞后特征数: 4
2025-03-21 16:37:57,659 -   - 训练集比例: 0.9
2025-03-21 16:37:57,659 -   - 输出目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\train_predictions\short_predictions
2025-03-21 16:37:57,659 -   - 模型存储路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:37:57,659 - 输出结果将保存到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\train_predictions\short_predictions
2025-03-21 16:37:57,659 - 
================================================================================
2025-03-21 16:37:57,660 - >>> 数据加载与预处理 <<<
2025-03-21 16:37:57,660 - ================================================================================

2025-03-21 16:37:57,660 - 加载数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_short\20250321.csv
2025-03-21 16:37:57,660 - 开始加载和预处理数据...
2025-03-21 16:37:57,989 - 数据加载完成，共 15294 条记录
2025-03-21 16:37:58,011 - 数据前5行预览: 
         Timestamp    129.128_1    129.128_2  ...  ws200_15  wp_true    ws_all
0  2023/11/8 21:45  15974.26563  16293.82813  ...  6.673899   222.28  7.983189
1  2023/11/8 22:00  15974.26563  16293.82813  ...  6.606531   229.29  8.071361
2  2023/11/8 22:15  15974.26563  16293.82813  ...  6.518705   237.56  8.174266
3  2023/11/8 22:30  15974.26563  16293.82813  ...  6.432374   232.26  8.108436
4  2023/11/8 22:45  15974.26563  16293.82813  ...  6.347599   216.93  7.915157

[5 rows x 303 columns]
2025-03-21 16:37:58,019 - 数据集时间范围: 2023-11-08 至 2024-04-17, 共 5 个月
2025-03-21 16:37:58,019 - 根据数据集实际时间范围(5个月)，优化months_list: [1, 3, 6, 9, 12, None] -> [1, 3, None]
2025-03-21 16:37:58,019 - 将使用以下时间段训练模型: [1, 3, None]
2025-03-21 16:37:58,019 - 
================================================================================
2025-03-21 16:37:58,019 - >>> 开始多数据集训练 <<<
2025-03-21 16:37:58,019 - ================================================================================

2025-03-21 16:37:58,019 - 将使用多种时间跨度的数据训练模型...
2025-03-21 16:37:58,019 - 
--------------------------------------------------
【使用多个数据集训练模型】
--------------------------------------------------
2025-03-21 16:37:58,024 - 最佳模型将保存到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models
2025-03-21 16:37:58,024 - 获取统一参数成功，包含 3 种模型类型
2025-03-21 16:37:58,024 - 
--------------------------------------------------
【训练数据集: 1个月】
--------------------------------------------------
2025-03-21 16:37:58,024 - 使用1个月的数据进行训练...
2025-03-21 16:37:58,024 - 过滤数据为最近1个月...
2025-03-21 16:37:58,026 - 过滤后的数据量: 2977
2025-03-21 16:37:58,026 - 对1个月数据进行预处理...
2025-03-21 16:37:58,031 - 预处理后的特征维度: (2977, 304), 目标变量维度: (2977,)
2025-03-21 16:37:58,031 - 数据集划分完成，训练集: (2679, 304), 验证集: (298, 304)
2025-03-21 16:37:58,032 - 提取了 298 个验证集时间戳，用于时间加权评估
2025-03-21 16:37:58,032 - 执行特征工程，滞后特征数: 4...
2025-03-21 16:37:58,079 - 特征工程后的特征维度 - 训练集: (2676, 859), 验证集: (295, 859)
2025-03-21 16:37:58,079 - 数据标准化...
2025-03-21 16:37:58,109 - 数据标准化完成
2025-03-21 16:37:58,109 - 创建时间窗口，窗口大小: 16...
2025-03-21 16:37:58,160 - 时间窗口创建完成 - 训练集: (2661, 16, 859), 验证集: (280, 16, 859)
2025-03-21 16:37:58,161 - 调整时间戳长度以匹配窗口化后的验证集 - 原始长度: 298, 目标长度: 280
2025-03-21 16:37:58,161 - 时间戳已截断至匹配窗口化后的验证集长度: 280
2025-03-21 16:37:58,161 - 为1个月数据创建模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\1months
2025-03-21 16:37:58,162 - 开始训练1个月数据的模型...
2025-03-21 16:37:58,162 - 
--------------------------------------------------
【开始模型训练与评估】
--------------------------------------------------
2025-03-21 16:37:58,162 - 模型和 scaler 将被保存到目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\1months
2025-03-21 16:37:58,162 - 
--------------------------------------------------
【训练 GBDT 模型】
--------------------------------------------------
2025-03-21 16:37:58,162 - 模型参数: {'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'boosting_type': 'gbdt', 'name': 'GBDT'}
2025-03-21 16:37:58,162 - 开始训练 GBDT 模型...
2025-03-21 16:38:20,106 - GBDT 模型训练完成
2025-03-21 16:38:20,106 - 使用 GBDT 模型预测验证集...
2025-03-21 16:38:20,114 - 使用时间加权方式计算模型评分...
2025-03-21 16:38:20,115 - GBDT 评估结果 - RMSE: 68.3078, K: 0.4502, 加权评分: 0.6447
2025-03-21 16:38:20,116 - ✅ GBDT 成为当前最佳模型 (基于加权评分)
2025-03-21 16:38:20,123 - GBDT 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\1months\GBDT.joblib
2025-03-21 16:38:20,123 - 
--------------------------------------------------
【训练 DART 模型】
--------------------------------------------------
2025-03-21 16:38:20,123 - 模型参数: {'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'boosting_type': 'dart', 'drop_rate': 0.1, 'name': 'DART'}
2025-03-21 16:38:20,123 - 开始训练 DART 模型...
2025-03-21 16:38:27,670 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:38:27,671 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models
2025-03-21 16:38:27,671 - 未找到GBDT模型文件
2025-03-21 16:38:27,671 - 未找到DART模型文件
2025-03-21 16:38:27,671 - 未找到GOSS模型文件
2025-03-21 16:38:27,672 - 未找到任何可用模型文件
2025-03-21 16:38:27,672 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-21 16:38:43,269 - DART 模型训练完成
2025-03-21 16:38:43,269 - 使用 DART 模型预测验证集...
2025-03-21 16:38:43,276 - 使用时间加权方式计算模型评分...
2025-03-21 16:38:43,277 - DART 评估结果 - RMSE: 62.7504, K: 0.6220, 加权评分: 0.7393
2025-03-21 16:38:43,277 - ✅ DART 成为当前最佳模型 (基于加权评分)
2025-03-21 16:38:43,288 - DART 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\1months\DART.joblib
2025-03-21 16:38:43,288 - 
--------------------------------------------------
【训练 GOSS 模型】
--------------------------------------------------
2025-03-21 16:38:43,288 - 模型参数: {'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'boosting_type': 'goss', 'top_rate': 0.2, 'other_rate': 0.1, 'name': 'GOSS'}
2025-03-21 16:38:43,288 - 开始训练 GOSS 模型...
2025-03-21 16:38:56,713 - GOSS 模型训练完成
2025-03-21 16:38:56,713 - 使用 GOSS 模型预测验证集...
2025-03-21 16:38:56,721 - 使用时间加权方式计算模型评分...
2025-03-21 16:38:56,723 - GOSS 评估结果 - RMSE: 68.2680, K: 0.4465, 加权评分: 0.6427
2025-03-21 16:38:56,740 - GOSS 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\1months\GOSS.joblib
2025-03-21 16:38:56,742 - Scaler 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\1months\scaler.joblib
2025-03-21 16:38:56,750 - 最佳模型 'DART' 已额外保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\1months\model.joblib
2025-03-21 16:38:56,750 - 1个月数据的模型训练完成
2025-03-21 16:38:56,750 - 
--------------------------------------------------
【更新每种算法的最佳模型】
--------------------------------------------------
2025-03-21 16:38:56,751 - ✅ 发现更好的GBDT模型 (来自1个月数据)
2025-03-21 16:38:56,751 -    新评分: 0.6447, 旧评分: -inf
2025-03-21 16:38:56,751 - ✅ 发现更好的DART模型 (来自1个月数据)
2025-03-21 16:38:56,751 -    新评分: 0.7393, 旧评分: -inf
2025-03-21 16:38:56,751 - ✅ 发现更好的GOSS模型 (来自1个月数据)
2025-03-21 16:38:56,751 -    新评分: 0.6427, 旧评分: -inf
2025-03-21 16:38:56,751 - 
--------------------------------------------------
【训练数据集: 3个月】
--------------------------------------------------
2025-03-21 16:38:56,751 - 使用3个月的数据进行训练...
2025-03-21 16:38:56,751 - 过滤数据为最近3个月...
2025-03-21 16:38:56,760 - 过滤后的数据量: 8737
2025-03-21 16:38:56,760 - 对3个月数据进行预处理...
2025-03-21 16:38:56,774 - 预处理后的特征维度: (8737, 304), 目标变量维度: (8737,)
2025-03-21 16:38:56,775 - 数据集划分完成，训练集: (7863, 304), 验证集: (874, 304)
2025-03-21 16:38:56,775 - 提取了 874 个验证集时间戳，用于时间加权评估
2025-03-21 16:38:56,775 - 执行特征工程，滞后特征数: 4...
2025-03-21 16:38:56,907 - 特征工程后的特征维度 - 训练集: (7860, 859), 验证集: (871, 859)
2025-03-21 16:38:56,907 - 数据标准化...
2025-03-21 16:38:56,986 - 数据标准化完成
2025-03-21 16:38:56,986 - 创建时间窗口，窗口大小: 16...
2025-03-21 16:38:57,148 - 时间窗口创建完成 - 训练集: (7845, 16, 859), 验证集: (856, 16, 859)
2025-03-21 16:38:57,148 - 调整时间戳长度以匹配窗口化后的验证集 - 原始长度: 874, 目标长度: 856
2025-03-21 16:38:57,148 - 时间戳已截断至匹配窗口化后的验证集长度: 856
2025-03-21 16:38:57,149 - 为3个月数据创建模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\3months
2025-03-21 16:38:57,149 - 开始训练3个月数据的模型...
2025-03-21 16:38:57,149 - 
--------------------------------------------------
【开始模型训练与评估】
--------------------------------------------------
2025-03-21 16:38:57,150 - 模型和 scaler 将被保存到目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\3months
2025-03-21 16:38:57,150 - 
--------------------------------------------------
【训练 GBDT 模型】
--------------------------------------------------
2025-03-21 16:38:57,150 - 模型参数: {'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'boosting_type': 'gbdt', 'name': 'GBDT'}
2025-03-21 16:38:57,150 - 开始训练 GBDT 模型...
2025-03-21 16:38:57,688 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:38:57,688 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models
2025-03-21 16:38:57,688 - 未找到GBDT模型文件
2025-03-21 16:38:57,688 - 未找到DART模型文件
2025-03-21 16:38:57,689 - 未找到GOSS模型文件
2025-03-21 16:38:57,689 - 未找到任何可用模型文件
2025-03-21 16:38:57,689 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-21 16:39:20,373 - GBDT 模型训练完成
2025-03-21 16:39:20,373 - 使用 GBDT 模型预测验证集...
2025-03-21 16:39:20,392 - 使用时间加权方式计算模型评分...
2025-03-21 16:39:20,400 - GBDT 评估结果 - RMSE: 53.7633, K: 0.6220, 加权评分: 0.7498
2025-03-21 16:39:20,400 - ✅ GBDT 成为当前最佳模型 (基于加权评分)
2025-03-21 16:39:20,409 - GBDT 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\3months\GBDT.joblib
2025-03-21 16:39:20,409 - 
--------------------------------------------------
【训练 DART 模型】
--------------------------------------------------
2025-03-21 16:39:20,409 - 模型参数: {'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'boosting_type': 'dart', 'drop_rate': 0.1, 'name': 'DART'}
2025-03-21 16:39:20,409 - 开始训练 DART 模型...
2025-03-21 16:39:27,697 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:39:27,697 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models
2025-03-21 16:39:27,697 - 未找到GBDT模型文件
2025-03-21 16:39:27,697 - 未找到DART模型文件
2025-03-21 16:39:27,698 - 未找到GOSS模型文件
2025-03-21 16:39:27,698 - 未找到任何可用模型文件
2025-03-21 16:39:27,698 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-21 16:39:43,918 - DART 模型训练完成
2025-03-21 16:39:43,918 - 使用 DART 模型预测验证集...
2025-03-21 16:39:43,941 - 使用时间加权方式计算模型评分...
2025-03-21 16:39:43,945 - DART 评估结果 - RMSE: 60.1716, K: 0.7051, 加权评分: 0.7855
2025-03-21 16:39:43,945 - ✅ DART 成为当前最佳模型 (基于加权评分)
2025-03-21 16:39:43,957 - DART 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\3months\DART.joblib
2025-03-21 16:39:43,958 - 
--------------------------------------------------
【训练 GOSS 模型】
--------------------------------------------------
2025-03-21 16:39:43,958 - 模型参数: {'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'boosting_type': 'goss', 'top_rate': 0.2, 'other_rate': 0.1, 'name': 'GOSS'}
2025-03-21 16:39:43,958 - 开始训练 GOSS 模型...
2025-03-21 16:39:57,710 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:39:57,710 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models
2025-03-21 16:39:57,710 - 未找到GBDT模型文件
2025-03-21 16:39:57,710 - 未找到DART模型文件
2025-03-21 16:39:57,711 - 未找到GOSS模型文件
2025-03-21 16:39:57,711 - 未找到任何可用模型文件
2025-03-21 16:39:57,711 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-21 16:40:05,335 - GOSS 模型训练完成
2025-03-21 16:40:05,335 - 使用 GOSS 模型预测验证集...
2025-03-21 16:40:05,360 - 使用时间加权方式计算模型评分...
2025-03-21 16:40:05,365 - GOSS 评估结果 - RMSE: 53.4696, K: 0.6275, 加权评分: 0.7529
2025-03-21 16:40:05,378 - GOSS 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\3months\GOSS.joblib
2025-03-21 16:40:05,380 - Scaler 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\3months\scaler.joblib
2025-03-21 16:40:05,388 - 最佳模型 'DART' 已额外保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\3months\model.joblib
2025-03-21 16:40:05,388 - 3个月数据的模型训练完成
2025-03-21 16:40:05,388 - 
--------------------------------------------------
【更新每种算法的最佳模型】
--------------------------------------------------
2025-03-21 16:40:05,388 - ✅ 发现更好的GBDT模型 (来自3个月数据)
2025-03-21 16:40:05,388 -    新评分: 0.7498, 旧评分: 0.6447
2025-03-21 16:40:05,388 - ✅ 发现更好的DART模型 (来自3个月数据)
2025-03-21 16:40:05,388 -    新评分: 0.7855, 旧评分: 0.7393
2025-03-21 16:40:05,388 - ✅ 发现更好的GOSS模型 (来自3个月数据)
2025-03-21 16:40:05,389 -    新评分: 0.7529, 旧评分: 0.6427
2025-03-21 16:40:05,389 - 
--------------------------------------------------
【训练数据集: 全部数据】
--------------------------------------------------
2025-03-21 16:40:05,389 - 使用全部数据的数据进行训练...
2025-03-21 16:40:05,389 - 使用全部数据...
2025-03-21 16:40:05,390 - 过滤后的数据量: 15294
2025-03-21 16:40:05,391 - 对全部数据数据进行预处理...
2025-03-21 16:40:05,405 - 预处理后的特征维度: (15294, 304), 目标变量维度: (15294,)
2025-03-21 16:40:05,407 - 数据集划分完成，训练集: (13764, 304), 验证集: (1530, 304)
2025-03-21 16:40:05,407 - 提取了 1530 个验证集时间戳，用于时间加权评估
2025-03-21 16:40:05,407 - 执行特征工程，滞后特征数: 4...
2025-03-21 16:40:05,534 - 特征工程后的特征维度 - 训练集: (13761, 859), 验证集: (1527, 859)
2025-03-21 16:40:05,534 - 数据标准化...
2025-03-21 16:40:05,668 - 数据标准化完成
2025-03-21 16:40:05,668 - 创建时间窗口，窗口大小: 16...
2025-03-21 16:40:06,012 - 时间窗口创建完成 - 训练集: (13746, 16, 859), 验证集: (1512, 16, 859)
2025-03-21 16:40:06,012 - 调整时间戳长度以匹配窗口化后的验证集 - 原始长度: 1530, 目标长度: 1512
2025-03-21 16:40:06,012 - 时间戳已截断至匹配窗口化后的验证集长度: 1512
2025-03-21 16:40:06,013 - 为全部数据数据创建模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\all_data
2025-03-21 16:40:06,013 - 开始训练全部数据数据的模型...
2025-03-21 16:40:06,013 - 
--------------------------------------------------
【开始模型训练与评估】
--------------------------------------------------
2025-03-21 16:40:06,013 - 模型和 scaler 将被保存到目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\all_data
2025-03-21 16:40:06,013 - 
--------------------------------------------------
【训练 GBDT 模型】
--------------------------------------------------
2025-03-21 16:40:06,013 - 模型参数: {'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'boosting_type': 'gbdt', 'name': 'GBDT'}
2025-03-21 16:40:06,013 - 开始训练 GBDT 模型...
2025-03-21 16:40:27,722 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:40:27,722 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models
2025-03-21 16:40:27,722 - 未找到GBDT模型文件
2025-03-21 16:40:27,723 - 未找到DART模型文件
2025-03-21 16:40:27,723 - 未找到GOSS模型文件
2025-03-21 16:40:27,723 - 未找到任何可用模型文件
2025-03-21 16:40:27,724 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-21 16:40:38,005 - GBDT 模型训练完成
2025-03-21 16:40:38,005 - 使用 GBDT 模型预测验证集...
2025-03-21 16:40:38,048 - 使用时间加权方式计算模型评分...
2025-03-21 16:40:38,056 - GBDT 评估结果 - RMSE: 51.9599, K: 0.6630, 加权评分: 0.7723
2025-03-21 16:40:38,056 - ✅ GBDT 成为当前最佳模型 (基于加权评分)
2025-03-21 16:40:38,064 - GBDT 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\all_data\GBDT.joblib
2025-03-21 16:40:38,064 - 
--------------------------------------------------
【训练 DART 模型】
--------------------------------------------------
2025-03-21 16:40:38,065 - 模型参数: {'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'boosting_type': 'dart', 'drop_rate': 0.1, 'name': 'DART'}
2025-03-21 16:40:38,065 - 开始训练 DART 模型...
2025-03-21 16:40:57,730 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:40:57,730 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models
2025-03-21 16:40:57,730 - 未找到GBDT模型文件
2025-03-21 16:40:57,731 - 未找到DART模型文件
2025-03-21 16:40:57,731 - 未找到GOSS模型文件
2025-03-21 16:40:57,731 - 未找到任何可用模型文件
2025-03-21 16:40:57,731 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-21 16:41:11,140 - DART 模型训练完成
2025-03-21 16:41:11,140 - 使用 DART 模型预测验证集...
2025-03-21 16:41:11,185 - 使用时间加权方式计算模型评分...
2025-03-21 16:41:11,192 - DART 评估结果 - RMSE: 65.0217, K: 0.6982, 加权评分: 0.7771
2025-03-21 16:41:11,192 - ✅ DART 成为当前最佳模型 (基于加权评分)
2025-03-21 16:41:11,201 - DART 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\all_data\DART.joblib
2025-03-21 16:41:11,201 - 
--------------------------------------------------
【训练 GOSS 模型】
--------------------------------------------------
2025-03-21 16:41:11,201 - 模型参数: {'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'boosting_type': 'goss', 'top_rate': 0.2, 'other_rate': 0.1, 'name': 'GOSS'}
2025-03-21 16:41:11,201 - 开始训练 GOSS 模型...
2025-03-21 16:41:27,733 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:41:27,733 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models
2025-03-21 16:41:27,733 - 未找到GBDT模型文件
2025-03-21 16:41:27,733 - 未找到DART模型文件
2025-03-21 16:41:27,734 - 未找到GOSS模型文件
2025-03-21 16:41:27,734 - 未找到任何可用模型文件
2025-03-21 16:41:27,734 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-21 16:41:41,400 - GOSS 模型训练完成
2025-03-21 16:41:41,400 - 使用 GOSS 模型预测验证集...
2025-03-21 16:41:41,446 - 使用时间加权方式计算模型评分...
2025-03-21 16:41:41,453 - GOSS 评估结果 - RMSE: 52.3822, K: 0.6635, 加权评分: 0.7720
2025-03-21 16:41:41,473 - GOSS 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\all_data\GOSS.joblib
2025-03-21 16:41:41,475 - Scaler 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\all_data\scaler.joblib
2025-03-21 16:41:41,483 - 最佳模型 'DART' 已额外保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\all_data\model.joblib
2025-03-21 16:41:41,483 - 全部数据数据的模型训练完成
2025-03-21 16:41:41,483 - 
--------------------------------------------------
【更新每种算法的最佳模型】
--------------------------------------------------
2025-03-21 16:41:41,484 - ✅ 发现更好的GBDT模型 (来自全部数据数据)
2025-03-21 16:41:41,484 -    新评分: 0.7723, 旧评分: 0.7498
2025-03-21 16:41:41,484 - ❌ 全部数据数据的DART模型不是最佳模型
2025-03-21 16:41:41,484 -    当前评分: 0.7771, 最佳评分: 0.7855
2025-03-21 16:41:41,484 - ✅ 发现更好的GOSS模型 (来自全部数据数据)
2025-03-21 16:41:41,484 -    新评分: 0.7720, 旧评分: 0.7529
2025-03-21 16:41:41,484 - 
--------------------------------------------------
【保存每种算法的最佳模型】
--------------------------------------------------
2025-03-21 16:41:41,493 - 最佳GBDT模型 (使用全部数据数据) 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models\GBDT.joblib
2025-03-21 16:41:41,493 - RMSE: 51.9599, K: 0.6630, 评分: 0.7723
2025-03-21 16:41:41,501 - 最佳DART模型 (使用3个月数据) 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models\DART.joblib
2025-03-21 16:41:41,501 - RMSE: 60.1716, K: 0.7051, 评分: 0.7855
2025-03-21 16:41:41,515 - 最佳GOSS模型 (使用全部数据数据) 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models\GOSS.joblib
2025-03-21 16:41:41,515 - RMSE: 52.3822, K: 0.6635, 评分: 0.7720
2025-03-21 16:41:41,636 - 多数据集训练完成! 已为每种算法选择最佳模型
2025-03-21 16:41:41,636 -   - 最佳GBDT模型: 使用全部数据数据, RMSE=51.9599, K=0.6630, 评分=0.7723
2025-03-21 16:41:41,636 -   - 最佳DART模型: 使用3个月数据, RMSE=60.1716, K=0.7051, 评分=0.7855
2025-03-21 16:41:41,636 -   - 最佳GOSS模型: 使用全部数据数据, RMSE=52.3822, K=0.6635, 评分=0.7720
2025-03-21 16:41:41,636 - 
================================================================================
2025-03-21 16:41:41,636 - >>> 开始计算模型权重 <<<
2025-03-21 16:41:41,636 - ================================================================================

2025-03-21 16:41:41,636 - 开始计算模型权重
2025-03-21 16:41:41,636 - 从训练数据集中提取最后三天数据进行权重优化
2025-03-21 16:41:41,637 - ✅ 已从训练数据集提取最后三天数据，共 289 条记录
2025-03-21 16:41:41,637 - 开始计算最优模型权重...
2025-03-21 16:41:41,637 - 
--------------------------------------------------
【计算模型权重】
--------------------------------------------------
2025-03-21 16:41:41,660 - 加载最佳模型和对应的scaler...
2025-03-21 16:41:41,660 - ✅ 已加载 GBDT 模型和scaler
2025-03-21 16:41:41,660 - ✅ 已加载 DART 模型和scaler
2025-03-21 16:41:41,660 - ✅ 已加载 GOSS 模型和scaler
2025-03-21 16:41:41,660 - 预处理验证数据，共 289 条记录...
2025-03-21 16:41:41,662 - 验证数据预处理完成，特征维度: (289, 304)
2025-03-21 16:41:41,694 - 验证数据特征工程完成，特征维度: (286, 859)
2025-03-21 16:41:41,694 - 使用各模型进行预测...
2025-03-21 16:41:41,702 - 使用 GBDT 模型预测...
2025-03-21 16:41:41,713 - ✅ GBDT 模型预测完成，预测结果数量: 271
2025-03-21 16:41:41,724 - 使用 DART 模型预测...
2025-03-21 16:41:41,734 - ✅ DART 模型预测完成，预测结果数量: 271
2025-03-21 16:41:41,744 - 使用 GOSS 模型预测...
2025-03-21 16:41:41,755 - ✅ GOSS 模型预测完成，预测结果数量: 271
2025-03-21 16:41:41,755 - 对齐预测结果，使用最小长度: 271
2025-03-21 16:41:41,755 - 创建线性回归的特征矩阵 (271, 3) 和目标向量 (271,)
2025-03-21 16:41:41,755 - 训练线性回归模型计算最优权重...
2025-03-21 16:41:41,756 - 线性回归得到的原始权重: {'GBDT': np.float64(0.0), 'DART': np.float64(1.1091389998624723), 'GOSS': np.float64(0.0)}
2025-03-21 16:41:41,756 - 归一化后的权重: {'GBDT': np.float64(0.0), 'DART': np.float64(1.0), 'GOSS': np.float64(0.0)}
2025-03-21 16:41:41,756 - 最终计算的模型权重: {'GBDT': np.float64(0.0), 'DART': np.float64(1.0), 'GOSS': np.float64(0.0)}
2025-03-21 16:41:41,758 - 计算得到的最优权重: {'GBDT': np.float64(0.0), 'DART': np.float64(1.0), 'GOSS': np.float64(0.0)}
2025-03-21 16:41:41,759 - 模型权重已保存到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\model_weights.joblib
2025-03-21 16:41:41,770 - ✅ 训练完成，已创建标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\20250321_train_done.flag
2025-03-21 16:41:41,770 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:41:41,770 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models
2025-03-21 16:41:41,770 - 发现GBDT模型文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models\GBDT.joblib
2025-03-21 16:41:41,770 - ✅ 模型已成功保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321，模型可用。
2025-03-21 16:41:57,750 - ✅ 发现新的预测文件：D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv\20250321.csv，执行预测...
2025-03-21 16:41:57,750 - 
============================================================
【风电功率预测开始】
============================================================
2025-03-21 16:41:57,750 - 配置信息:
2025-03-21 16:41:57,750 -   - 数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv\20250321.csv
2025-03-21 16:41:57,751 -   - 模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321
2025-03-21 16:41:57,751 -   - 窗口大小: 16
2025-03-21 16:41:57,751 -   - 滞后特征数: 4
2025-03-21 16:41:57,751 - 
============================================================
【预处理新数据】
============================================================
2025-03-21 16:41:57,751 - 加载数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv\20250321.csv
2025-03-21 16:41:57,767 - 数据加载完成，去除缺失值后共 109 条记录
2025-03-21 16:41:57,822 - 数据前5行预览:
         Timestamp    129.128_1    129.128_2  ...  ws200_13   ws200_14   ws200_15
0  2024/4/16 20:00  15974.26563  16293.82813  ...  9.541195  10.863499  12.404554
1  2024/4/16 20:15  15974.26563  16293.82813  ...  9.280917  10.585079  12.259521
2  2024/4/16 20:30  15974.26563  16293.82813  ...  9.020693  10.307371  12.115601
3  2024/4/16 20:45  15974.26563  16293.82813  ...  8.760527  10.030434  11.972834
4  2024/4/16 21:00  15974.26563  16293.82813  ...  8.500424   9.754334  11.831263

[5 rows x 301 columns]
2025-03-21 16:41:57,823 - 预处理数据...
2025-03-21 16:41:57,824 - 预处理完成，特征维度: (109, 304)
2025-03-21 16:41:57,824 - 执行特征工程，滞后特征数: 4...
2025-03-21 16:41:57,859 - 特征工程完成，特征维度: (106, 859)
2025-03-21 16:41:57,859 - 新数据预处理完成，共 106 个样本
2025-03-21 16:41:57,860 - ✅ 发现最佳模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models，尝试使用多模型加权预测
2025-03-21 16:41:57,860 - 
============================================================
【加载多个模型】
============================================================
2025-03-21 16:41:57,860 - 从目录加载模型和 scaler: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\best_models
2025-03-21 16:41:57,860 - 加载 GBDT 模型和 scaler...
2025-03-21 16:41:57,869 - ✅ 已成功加载 GBDT 模型和对应的 scaler
2025-03-21 16:41:57,870 - 加载 DART 模型和 scaler...
2025-03-21 16:41:57,878 - ✅ 已成功加载 DART 模型和对应的 scaler
2025-03-21 16:41:57,878 - 加载 GOSS 模型和 scaler...
2025-03-21 16:41:57,887 - ✅ 已成功加载 GOSS 模型和对应的 scaler
2025-03-21 16:41:57,887 - 加载完成，共加载了 3 个模型: GBDT, DART, GOSS
2025-03-21 16:41:57,887 - 尝试加载模型权重文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250321\model_weights.joblib
2025-03-21 16:41:57,887 - ✅ 已加载模型权重: {'GBDT': np.float64(0.0), 'DART': np.float64(1.0), 'GOSS': np.float64(0.0)}
2025-03-21 16:41:57,888 - 
============================================================
【使用多模型加权预测】
============================================================
2025-03-21 16:41:57,888 - 使用自定义权重: {'GBDT': np.float64(0.0), 'DART': np.float64(1.0), 'GOSS': np.float64(0.0)}
2025-03-21 16:41:57,888 - ❌ GBDT 模型权重为0，跳过
2025-03-21 16:41:57,888 - 使用 DART 模型进行预测 (权重: 1.0000)...
2025-03-21 16:41:57,893 - DART: 数据标准化完成
2025-03-21 16:41:57,895 - DART: 时间窗口创建完成，窗口数量: 91
2025-03-21 16:41:57,901 - ✅ DART 模型预测完成，生成了 91 个预测值
2025-03-21 16:41:57,901 -    统计: 最小值=170.80, 最大值=209.75, 平均值=196.57
2025-03-21 16:41:57,901 - ❌ GOSS 模型权重为0，跳过
2025-03-21 16:41:57,901 - 所有预测结果对齐到最小长度: 91
2025-03-21 16:41:57,901 - 开始计算加权平均预测结果...
2025-03-21 16:41:57,901 -   加入 DART 模型贡献 (权重: 1.0000)
2025-03-21 16:41:57,901 - 加权平均预测完成，生成了 91 个预测值
2025-03-21 16:41:57,901 - 加权预测结果统计: 最小值=170.80, 最大值=209.75, 平均值=196.57
2025-03-21 16:41:57,902 - ✅ 多模型加权预测完成，使用模型: GBDT, DART, GOSS
2025-03-21 16:41:57,902 - 
============================================================
【保存预测结果】
============================================================
2025-03-21 16:41:57,907 - 创建输出目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\results\shortresult\20250321
2025-03-21 16:41:57,908 - 预测结果数据框创建完成，共 91 行
2025-03-21 16:41:57,910 - ✅ 预测结果已保存到文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\results\shortresult\20250321\20250321.csv
2025-03-21 16:41:57,911 - 尝试将预测结果导入数据库...
2025-03-21 16:41:57,911 - 发送HTTP请求到: http://localhost:5000/prediction2database/batch_shortl_power
2025-03-21 16:42:00,104 - ✅ 数据已成功导入数据库
2025-03-21 16:42:00,104 -    总记录数: 91, 更新: 91, 插入: 0
2025-03-21 16:42:00,104 - ✅ 预测结果已保存到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\results\shortresult\20250321\20250321.csv
2025-03-21 16:42:00,105 - ✅ 创建预测完成标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\results\shortresult\20250321\20250321_predict_done.flag
2025-03-21 16:42:00,105 - 
============================================================
【风电功率预测完成】
============================================================
2025-03-21 16:42:00,105 - 风电功率预测完成
2025-03-21 16:42:00,107 - ✅ 预测执行完成
2025-03-21 16:42:00,107 - 
================================================================================
2025-03-21 16:42:00,107 - >>> 系统任务完成 <<<
2025-03-21 16:42:00,107 - ================================================================================

2025-03-21 16:42:00,107 - 系统任务完成
2025-03-21 16:42:00,107 - 今天的训练和预测任务已完成。

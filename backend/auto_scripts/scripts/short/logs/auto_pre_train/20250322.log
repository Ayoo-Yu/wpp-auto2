2025-03-22 20:48:44,967 - 
================================================================================
2025-03-22 20:48:44,967 - >>> 自动训练预测系统启动 <<<
2025-03-22 20:48:44,967 - ================================================================================

2025-03-22 20:48:44,967 - 自动训练预测系统启动
2025-03-22 20:48:44,967 - 今天的日期是: 20250322
2025-03-22 20:48:44,967 - 创建监视线程...
2025-03-22 20:48:44,967 - 启动训练线程...
2025-03-22 20:48:44,968 - 启动预测线程...
2025-03-22 20:48:44,968 - 
================================================================================
2025-03-22 20:48:44,968 - >>> 启动训练监视线程 <<<
2025-03-22 20:48:44,968 - ================================================================================

2025-03-22 20:48:44,968 - 等待线程完成...
2025-03-22 20:48:44,968 - 
================================================================================
2025-03-22 20:48:44,968 - 启动训练监视线程
2025-03-22 20:48:44,968 - >>> 启动预测监视线程 <<<
2025-03-22 20:48:44,969 - ================================================================================

2025-03-22 20:48:44,969 - 启动预测监视线程
2025-03-22 20:48:44,969 - 训练文件路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_short\20250322.csv
2025-03-22 20:48:44,969 - 模型存储目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:48:44,969 - 训练完成标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\short\logs\auto_pre_train\20250322_train_done.flag
2025-03-22 20:48:44,969 - 预测数据文件路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv\20250322.csv
2025-03-22 20:48:44,969 - 开始监视 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_short 文件夹以进行训练...
2025-03-22 20:48:44,969 - 模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:48:44,969 - 预测完成标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\short\logs\auto_pre_train\20250322_predict_done.flag
2025-03-22 20:48:44,969 - 开始监视 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv 文件夹以进行预测...
2025-03-22 20:48:44,969 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:48:44,970 - ✅ 发现新的训练文件：D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_short\20250322.csv，执行训练...
2025-03-22 20:48:44,970 - 未找到best_models目录，检查传统模型文件
2025-03-22 20:48:44,970 - 
================================================================================
2025-03-22 20:48:44,970 - >>> 开始模型训练 <<<
2025-03-22 20:48:44,970 - 未找到任何可用模型文件
2025-03-22 20:48:44,970 - ================================================================================

2025-03-22 20:48:44,970 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-22 20:48:44,970 - 配置信息:
2025-03-22 20:48:44,971 -   - 窗口大小: 16
2025-03-22 20:48:44,971 -   - 滞后特征数: 4
2025-03-22 20:48:44,971 -   - 训练集比例: 0.9
2025-03-22 20:48:44,971 -   - 输出目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\train_predictions\short_predictions
2025-03-22 20:48:44,971 -   - 模型存储路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:48:44,971 - 输出结果将保存到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\train_predictions\short_predictions
2025-03-22 20:48:44,971 - 
================================================================================
2025-03-22 20:48:44,971 - >>> 数据加载与预处理 <<<
2025-03-22 20:48:44,971 - ================================================================================

2025-03-22 20:48:44,971 - 加载数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_short\20250322.csv
2025-03-22 20:48:44,971 - 开始加载和预处理数据...
2025-03-22 20:48:45,077 - 数据加载完成，共 2973 条记录
2025-03-22 20:48:45,111 - 数据前5行预览: 
        Timestamp    129.128_1    129.128_2  ...  ws200_15  wp_true    ws_all
0  2024/3/18 0:00  15974.26563  16293.82813  ...  9.731182   227.36  8.047185
1  2024/3/18 0:15  15974.26563  16293.82813  ...  9.603328   247.36  8.295189
2  2024/3/18 0:30  15974.26563  16293.82813  ...  9.476844   255.30  8.392767
3  2024/3/18 0:45  15974.26563  16293.82813  ...  9.351785   267.26  8.539846
4  2024/3/18 1:00  15974.26563  16293.82813  ...  9.228210   279.18  8.687130

[5 rows x 303 columns]
2025-03-22 20:48:45,114 - 数据集时间范围: 2024-03-18 至 2024-04-17, 共 1 个月
2025-03-22 20:48:45,114 - 根据数据集实际时间范围(1个月)，优化months_list: [1, 3, 6, 9, 12, None] -> [1, None]
2025-03-22 20:48:45,114 - 将使用以下时间段训练模型: [1, None]
2025-03-22 20:48:45,114 - 
================================================================================
2025-03-22 20:48:45,114 - >>> 开始多数据集训练 <<<
2025-03-22 20:48:45,114 - ================================================================================

2025-03-22 20:48:45,114 - 将使用多种时间跨度的数据训练模型...
2025-03-22 20:48:45,114 - 
--------------------------------------------------
【使用多个数据集训练模型】
--------------------------------------------------
2025-03-22 20:48:45,115 - 最佳模型将保存到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models
2025-03-22 20:48:45,115 - 获取统一参数成功，包含 3 种模型类型
2025-03-22 20:48:45,115 - 
--------------------------------------------------
【训练数据集: 1个月】
--------------------------------------------------
2025-03-22 20:48:45,115 - 使用1个月的数据进行训练...
2025-03-22 20:48:45,115 - 过滤数据为最近1个月...
2025-03-22 20:48:45,116 - 过滤后的数据量: 2973
2025-03-22 20:48:45,116 - 对1个月数据进行预处理...
2025-03-22 20:48:45,120 - 预处理后的特征维度: (2973, 304), 目标变量维度: (2973,)
2025-03-22 20:48:45,120 - 数据集划分完成，训练集: (2675, 304), 验证集: (298, 304)
2025-03-22 20:48:45,120 - 提取了 298 个验证集时间戳，用于时间加权评估
2025-03-22 20:48:45,120 - 执行特征工程，滞后特征数: 4...
2025-03-22 20:48:45,169 - 特征工程后的特征维度 - 训练集: (2672, 859), 验证集: (295, 859)
2025-03-22 20:48:45,170 - 数据标准化...
2025-03-22 20:48:45,211 - 数据标准化完成
2025-03-22 20:48:45,211 - 创建时间窗口，窗口大小: 16...
2025-03-22 20:48:45,262 - 时间窗口创建完成 - 训练集: (2657, 16, 859), 验证集: (280, 16, 859)
2025-03-22 20:48:45,263 - 调整时间戳长度以匹配窗口化后的验证集 - 原始长度: 298, 目标长度: 280
2025-03-22 20:48:45,263 - 时间戳已截断至匹配窗口化后的验证集长度: 280
2025-03-22 20:48:45,263 - 为1个月数据创建模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\1months
2025-03-22 20:48:45,263 - 开始训练1个月数据的模型...
2025-03-22 20:48:45,263 - 
--------------------------------------------------
【开始模型训练与评估】
--------------------------------------------------
2025-03-22 20:48:45,263 - 模型和 scaler 将被保存到目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\1months
2025-03-22 20:48:45,263 - 
--------------------------------------------------
【训练 GBDT 模型】
--------------------------------------------------
2025-03-22 20:48:45,263 - 模型参数: {'boosting_type': 'gbdt', 'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'name': 'GBDT'}
2025-03-22 20:48:45,264 - 开始训练 GBDT 模型...
2025-03-22 20:49:01,696 - GBDT 模型训练完成
2025-03-22 20:49:01,696 - 使用 GBDT 模型预测验证集...
2025-03-22 20:49:01,703 - 使用时间加权方式计算模型评分...
2025-03-22 20:49:01,705 - GBDT 评估结果 - RMSE: 67.1426, K: 0.4608, 加权评分: 0.6513
2025-03-22 20:49:01,705 - ✅ GBDT 成为当前最佳模型 (基于加权评分)
2025-03-22 20:49:01,712 - GBDT 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\1months\GBDT.joblib
2025-03-22 20:49:01,712 - 
--------------------------------------------------
【训练 DART 模型】
--------------------------------------------------
2025-03-22 20:49:01,712 - 模型参数: {'boosting_type': 'dart', 'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'drop_rate': 0.1, 'name': 'DART'}
2025-03-22 20:49:01,712 - 开始训练 DART 模型...
2025-03-22 20:49:14,985 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:49:14,985 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models
2025-03-22 20:49:14,986 - 未找到GBDT模型文件
2025-03-22 20:49:14,986 - 未找到DART模型文件
2025-03-22 20:49:14,986 - 未找到GOSS模型文件
2025-03-22 20:49:14,987 - 未找到任何可用模型文件
2025-03-22 20:49:14,987 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-22 20:49:20,501 - DART 模型训练完成
2025-03-22 20:49:20,501 - 使用 DART 模型预测验证集...
2025-03-22 20:49:20,508 - 使用时间加权方式计算模型评分...
2025-03-22 20:49:20,510 - DART 评估结果 - RMSE: 62.3280, K: 0.6255, 加权评分: 0.7416
2025-03-22 20:49:20,511 - ✅ DART 成为当前最佳模型 (基于加权评分)
2025-03-22 20:49:20,523 - DART 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\1months\DART.joblib
2025-03-22 20:49:20,523 - 
--------------------------------------------------
【训练 GOSS 模型】
--------------------------------------------------
2025-03-22 20:49:20,523 - 模型参数: {'boosting_type': 'goss', 'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'top_rate': 0.2, 'other_rate': 0.1, 'name': 'GOSS'}
2025-03-22 20:49:20,523 - 开始训练 GOSS 模型...
2025-03-22 20:49:42,012 - GOSS 模型训练完成
2025-03-22 20:49:42,012 - 使用 GOSS 模型预测验证集...
2025-03-22 20:49:42,019 - 使用时间加权方式计算模型评分...
2025-03-22 20:49:42,021 - GOSS 评估结果 - RMSE: 68.3105, K: 0.4494, 加权评分: 0.6442
2025-03-22 20:49:42,035 - GOSS 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\1months\GOSS.joblib
2025-03-22 20:49:42,037 - Scaler 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\1months\scaler.joblib
2025-03-22 20:49:42,046 - 最佳模型 'DART' 已额外保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\1months\model.joblib
2025-03-22 20:49:42,046 - 1个月数据的模型训练完成
2025-03-22 20:49:42,046 - 
--------------------------------------------------
【更新每种算法的最佳模型】
--------------------------------------------------
2025-03-22 20:49:42,046 - ✅ 发现更好的GBDT模型 (来自1个月数据)
2025-03-22 20:49:42,046 -    新评分: 0.6513, 旧评分: -inf
2025-03-22 20:49:42,046 - ✅ 发现更好的DART模型 (来自1个月数据)
2025-03-22 20:49:42,046 -    新评分: 0.7416, 旧评分: -inf
2025-03-22 20:49:42,046 - ✅ 发现更好的GOSS模型 (来自1个月数据)
2025-03-22 20:49:42,047 -    新评分: 0.6442, 旧评分: -inf
2025-03-22 20:49:42,047 - 
--------------------------------------------------
【训练数据集: 全部数据】
--------------------------------------------------
2025-03-22 20:49:42,047 - 使用全部数据的数据进行训练...
2025-03-22 20:49:42,047 - 使用全部数据...
2025-03-22 20:49:42,049 - 过滤后的数据量: 2973
2025-03-22 20:49:42,049 - 对全部数据数据进行预处理...
2025-03-22 20:49:42,056 - 预处理后的特征维度: (2973, 304), 目标变量维度: (2973,)
2025-03-22 20:49:42,057 - 数据集划分完成，训练集: (2675, 304), 验证集: (298, 304)
2025-03-22 20:49:42,057 - 提取了 298 个验证集时间戳，用于时间加权评估
2025-03-22 20:49:42,057 - 执行特征工程，滞后特征数: 4...
2025-03-22 20:49:42,182 - 特征工程后的特征维度 - 训练集: (2672, 859), 验证集: (295, 859)
2025-03-22 20:49:42,182 - 数据标准化...
2025-03-22 20:49:42,241 - 数据标准化完成
2025-03-22 20:49:42,241 - 创建时间窗口，窗口大小: 16...
2025-03-22 20:49:42,330 - 时间窗口创建完成 - 训练集: (2657, 16, 859), 验证集: (280, 16, 859)
2025-03-22 20:49:42,330 - 调整时间戳长度以匹配窗口化后的验证集 - 原始长度: 298, 目标长度: 280
2025-03-22 20:49:42,330 - 时间戳已截断至匹配窗口化后的验证集长度: 280
2025-03-22 20:49:42,331 - 为全部数据数据创建模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\all_data
2025-03-22 20:49:42,331 - 开始训练全部数据数据的模型...
2025-03-22 20:49:42,331 - 
--------------------------------------------------
【开始模型训练与评估】
--------------------------------------------------
2025-03-22 20:49:42,331 - 模型和 scaler 将被保存到目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\all_data
2025-03-22 20:49:42,331 - 
--------------------------------------------------
【训练 GBDT 模型】
--------------------------------------------------
2025-03-22 20:49:42,332 - 模型参数: {'boosting_type': 'gbdt', 'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'name': 'GBDT'}
2025-03-22 20:49:42,332 - 开始训练 GBDT 模型...
2025-03-22 20:49:44,998 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:49:44,998 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models
2025-03-22 20:49:44,999 - 未找到GBDT模型文件
2025-03-22 20:49:44,999 - 未找到DART模型文件
2025-03-22 20:49:44,999 - 未找到GOSS模型文件
2025-03-22 20:49:44,999 - 未找到任何可用模型文件
2025-03-22 20:49:44,999 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-22 20:50:08,923 - GBDT 模型训练完成
2025-03-22 20:50:08,923 - 使用 GBDT 模型预测验证集...
2025-03-22 20:50:08,931 - 使用时间加权方式计算模型评分...
2025-03-22 20:50:08,934 - GBDT 评估结果 - RMSE: 67.1426, K: 0.4608, 加权评分: 0.6513
2025-03-22 20:50:08,934 - ✅ GBDT 成为当前最佳模型 (基于加权评分)
2025-03-22 20:50:08,947 - GBDT 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\all_data\GBDT.joblib
2025-03-22 20:50:08,947 - 
--------------------------------------------------
【训练 DART 模型】
--------------------------------------------------
2025-03-22 20:50:08,947 - 模型参数: {'boosting_type': 'dart', 'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'drop_rate': 0.1, 'name': 'DART'}
2025-03-22 20:50:08,947 - 开始训练 DART 模型...
2025-03-22 20:50:15,006 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:50:15,006 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models
2025-03-22 20:50:15,006 - 未找到GBDT模型文件
2025-03-22 20:50:15,007 - 未找到DART模型文件
2025-03-22 20:50:15,007 - 未找到GOSS模型文件
2025-03-22 20:50:15,007 - 未找到任何可用模型文件
2025-03-22 20:50:15,007 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-22 20:50:34,889 - DART 模型训练完成
2025-03-22 20:50:34,890 - 使用 DART 模型预测验证集...
2025-03-22 20:50:34,899 - 使用时间加权方式计算模型评分...
2025-03-22 20:50:34,901 - DART 评估结果 - RMSE: 62.3280, K: 0.6255, 加权评分: 0.7416
2025-03-22 20:50:34,901 - ✅ DART 成为当前最佳模型 (基于加权评分)
2025-03-22 20:50:34,913 - DART 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\all_data\DART.joblib
2025-03-22 20:50:34,914 - 
--------------------------------------------------
【训练 GOSS 模型】
--------------------------------------------------
2025-03-22 20:50:34,914 - 模型参数: {'boosting_type': 'goss', 'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'top_rate': 0.2, 'other_rate': 0.1, 'name': 'GOSS'}
2025-03-22 20:50:34,914 - 开始训练 GOSS 模型...
2025-03-22 20:50:45,015 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:50:45,015 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models
2025-03-22 20:50:45,016 - 未找到GBDT模型文件
2025-03-22 20:50:45,016 - 未找到DART模型文件
2025-03-22 20:50:45,016 - 未找到GOSS模型文件
2025-03-22 20:50:45,016 - 未找到任何可用模型文件
2025-03-22 20:50:45,016 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-22 20:50:56,747 - GOSS 模型训练完成
2025-03-22 20:50:56,747 - 使用 GOSS 模型预测验证集...
2025-03-22 20:50:56,756 - 使用时间加权方式计算模型评分...
2025-03-22 20:50:56,759 - GOSS 评估结果 - RMSE: 68.3105, K: 0.4494, 加权评分: 0.6442
2025-03-22 20:50:56,770 - GOSS 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\all_data\GOSS.joblib
2025-03-22 20:50:56,772 - Scaler 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\all_data\scaler.joblib
2025-03-22 20:50:56,780 - 最佳模型 'DART' 已额外保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\all_data\model.joblib
2025-03-22 20:50:56,780 - 全部数据数据的模型训练完成
2025-03-22 20:50:56,780 - 
--------------------------------------------------
【更新每种算法的最佳模型】
--------------------------------------------------
2025-03-22 20:50:56,780 - ❌ 全部数据数据的GBDT模型不是最佳模型
2025-03-22 20:50:56,780 -    当前评分: 0.6513, 最佳评分: 0.6513
2025-03-22 20:50:56,780 - ❌ 全部数据数据的DART模型不是最佳模型
2025-03-22 20:50:56,780 -    当前评分: 0.7416, 最佳评分: 0.7416
2025-03-22 20:50:56,780 - ❌ 全部数据数据的GOSS模型不是最佳模型
2025-03-22 20:50:56,780 -    当前评分: 0.6442, 最佳评分: 0.6442
2025-03-22 20:50:56,781 - 
--------------------------------------------------
【保存每种算法的最佳模型】
--------------------------------------------------
2025-03-22 20:50:56,791 - 最佳GBDT模型 (使用1个月数据) 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models\GBDT.joblib
2025-03-22 20:50:56,791 - RMSE: 67.1426, K: 0.4608, 评分: 0.6513
2025-03-22 20:50:56,801 - 最佳DART模型 (使用1个月数据) 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models\DART.joblib
2025-03-22 20:50:56,802 - RMSE: 62.3280, K: 0.6255, 评分: 0.7416
2025-03-22 20:50:56,816 - 最佳GOSS模型 (使用1个月数据) 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models\GOSS.joblib
2025-03-22 20:50:56,816 - RMSE: 68.3105, K: 0.4494, 评分: 0.6442
2025-03-22 20:50:56,827 - 多数据集训练完成! 已为每种算法选择最佳模型
2025-03-22 20:50:56,828 -   - 最佳GBDT模型: 使用1个月数据, RMSE=67.1426, K=0.4608, 评分=0.6513
2025-03-22 20:50:56,828 -   - 最佳DART模型: 使用1个月数据, RMSE=62.3280, K=0.6255, 评分=0.7416
2025-03-22 20:50:56,828 -   - 最佳GOSS模型: 使用1个月数据, RMSE=68.3105, K=0.4494, 评分=0.6442
2025-03-22 20:50:56,828 - 
================================================================================
2025-03-22 20:50:56,828 - >>> 开始计算模型权重 <<<
2025-03-22 20:50:56,828 - ================================================================================

2025-03-22 20:50:56,828 - 开始计算模型权重
2025-03-22 20:50:56,828 - 从训练数据集中提取最后三天数据进行权重优化
2025-03-22 20:50:56,829 - ✅ 已从训练数据集提取最后三天数据，共 289 条记录
2025-03-22 20:50:56,829 - 开始计算最优模型权重...
2025-03-22 20:50:56,829 - 
--------------------------------------------------
【计算模型权重】
--------------------------------------------------
2025-03-22 20:50:56,872 - 加载最佳模型和对应的scaler...
2025-03-22 20:50:56,873 - ✅ 已加载 GBDT 模型和scaler
2025-03-22 20:50:56,873 - ✅ 已加载 DART 模型和scaler
2025-03-22 20:50:56,873 - ✅ 已加载 GOSS 模型和scaler
2025-03-22 20:50:56,873 - 预处理验证数据，共 289 条记录...
2025-03-22 20:50:56,877 - 验证数据预处理完成，特征维度: (289, 304)
2025-03-22 20:50:56,919 - 验证数据特征工程完成，特征维度: (286, 859)
2025-03-22 20:50:56,919 - 使用各模型进行预测...
2025-03-22 20:50:56,927 - 使用 GBDT 模型预测...
2025-03-22 20:50:56,935 - ✅ GBDT 模型预测完成，预测结果数量: 271
2025-03-22 20:50:56,948 - 使用 DART 模型预测...
2025-03-22 20:50:56,955 - ✅ DART 模型预测完成，预测结果数量: 271
2025-03-22 20:50:56,964 - 使用 GOSS 模型预测...
2025-03-22 20:50:56,972 - ✅ GOSS 模型预测完成，预测结果数量: 271
2025-03-22 20:50:56,972 - 对齐预测结果，使用最小长度: 271
2025-03-22 20:50:56,972 - 创建线性回归的特征矩阵 (271, 3) 和目标向量 (271,)
2025-03-22 20:50:56,972 - 训练线性回归模型计算最优权重...
2025-03-22 20:50:56,973 - 线性回归得到的权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:50:56,974 - 最终计算的模型权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:50:56,975 - 计算得到的最优权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:50:56,976 - 模型权重已保存到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\model_weights.joblib
2025-03-22 20:50:56,982 - 训练完成，已创建标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\short\logs\auto_pre_train\20250322_train_done.flag
2025-03-22 20:50:56,982 - ✅ 训练完成，已创建标志文件
2025-03-22 20:50:56,982 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:50:56,983 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models
2025-03-22 20:50:56,983 - 发现GBDT模型文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models\GBDT.joblib
2025-03-22 20:50:56,983 - ✅ 模型已成功保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322，模型可用。
2025-03-22 20:51:15,025 - ✅ 发现新的预测文件：D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv\20250322.csv，执行预测...
2025-03-22 20:51:15,025 - 
============================================================
【风电功率预测开始】
============================================================
2025-03-22 20:51:15,025 - 配置信息:
2025-03-22 20:51:15,025 -   - 数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv\20250322.csv
2025-03-22 20:51:15,025 -   - 模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:51:15,026 -   - 窗口大小: 16
2025-03-22 20:51:15,026 -   - 滞后特征数: 4
2025-03-22 20:51:15,026 - 
============================================================
【预处理新数据】
============================================================
2025-03-22 20:51:15,026 - 加载数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv\20250322.csv
2025-03-22 20:51:15,040 - 数据加载完成，去除缺失值后共 111 条记录
2025-03-22 20:51:15,101 - 数据前5行预览:
         Timestamp    129.128_1    129.128_2  ...   ws200_15  wp_true    ws_all
0  2024/4/16 19:30  15974.26563  16293.82813  ...  12.128573   260.71  8.459232
1  2024/4/16 19:45  15974.26563  16293.82813  ...  12.265793   279.02  8.685149
2  2024/4/16 20:00  15974.26563  16293.82813  ...  12.404554   296.51  8.902384
3  2024/4/16 20:15  15974.26563  16293.82813  ...  12.259521   301.00  8.958328
4  2024/4/16 20:30  15974.26563  16293.82813  ...  12.115601   297.32  8.912472

[5 rows x 303 columns]
2025-03-22 20:51:15,101 - 预处理数据...
2025-03-22 20:51:15,104 - 预处理完成，特征维度: (111, 306)
2025-03-22 20:51:15,104 - 执行特征工程，滞后特征数: 4...
2025-03-22 20:51:15,173 - 特征工程完成，特征维度: (108, 861)
2025-03-22 20:51:15,174 - 新数据预处理完成，共 108 个样本
2025-03-22 20:51:15,174 - ✅ 发现最佳模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models，尝试使用多模型加权预测
2025-03-22 20:51:15,174 - 
============================================================
【加载多个模型】
============================================================
2025-03-22 20:51:15,174 - 从目录加载模型和 scaler: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models
2025-03-22 20:51:15,174 - 加载 GBDT 模型和 scaler...
2025-03-22 20:51:15,182 - ✅ 已成功加载 GBDT 模型和对应的 scaler
2025-03-22 20:51:15,183 - 加载 DART 模型和 scaler...
2025-03-22 20:51:15,188 - ✅ 已成功加载 DART 模型和对应的 scaler
2025-03-22 20:51:15,189 - 加载 GOSS 模型和 scaler...
2025-03-22 20:51:15,197 - ✅ 已成功加载 GOSS 模型和对应的 scaler
2025-03-22 20:51:15,197 - 加载完成，共加载了 3 个模型: GBDT, DART, GOSS
2025-03-22 20:51:15,197 - 尝试加载模型权重文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\model_weights.joblib
2025-03-22 20:51:15,197 - ✅ 已加载模型权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:51:15,197 - 
============================================================
【使用多模型加权预测】
============================================================
2025-03-22 20:51:15,197 - 使用自定义权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:51:15,197 - 使用 GBDT 模型进行预测 (权重: 0.3379)...
2025-03-22 20:51:15,198 - ❌ GBDT 模型预测出错: The feature names should match those that were passed during fit.
Feature names unseen at fit time:
- wp_true
- ws_all

2025-03-22 20:51:15,198 - 使用 DART 模型进行预测 (权重: 0.1847)...
2025-03-22 20:51:15,198 - ❌ DART 模型预测出错: The feature names should match those that were passed during fit.
Feature names unseen at fit time:
- wp_true
- ws_all

2025-03-22 20:51:15,198 - ❌ GOSS 模型权重为0，跳过
2025-03-22 20:51:15,198 - ❌ 所有模型预测均失败
2025-03-22 20:51:15,198 - 
============================================================
【多模型预测失败】
============================================================
2025-03-22 20:51:15,198 - 多模型预测失败
2025-03-22 20:51:15,198 - ❌ 错误信息: 所有模型预测均失败
2025-03-22 20:51:15,198 - 回退到单一模型预测...
2025-03-22 20:51:15,199 - 
============================================================
【加载模型和标准化器】
============================================================
2025-03-22 20:51:15,199 - Scaler 文件未找到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\scaler.joblib
2025-03-22 20:51:15,205 - 
================================================================================
2025-03-22 20:51:15,205 - >>> 系统任务完成 <<<
2025-03-22 20:51:15,205 - ================================================================================

2025-03-22 20:51:15,205 - 系统任务完成
2025-03-22 20:51:15,205 - 今天的训练和预测任务已完成。
2025-03-22 20:53:30,317 - 
================================================================================
2025-03-22 20:53:30,317 - >>> 自动训练预测系统启动 <<<
2025-03-22 20:53:30,317 - ================================================================================

2025-03-22 20:53:30,317 - 自动训练预测系统启动
2025-03-22 20:53:30,317 - 今天的日期是: 20250322
2025-03-22 20:53:30,317 - 创建监视线程...
2025-03-22 20:53:30,317 - 启动训练线程...
2025-03-22 20:53:30,318 - 
================================================================================
2025-03-22 20:53:30,318 - 启动预测线程...
2025-03-22 20:53:30,318 - >>> 启动训练监视线程 <<<
2025-03-22 20:53:30,318 - ================================================================================

2025-03-22 20:53:30,319 - 启动训练监视线程
2025-03-22 20:53:30,319 - 等待线程完成...
2025-03-22 20:53:30,319 - 
================================================================================
2025-03-22 20:53:30,319 - >>> 启动预测监视线程 <<<
2025-03-22 20:53:30,319 - ================================================================================

2025-03-22 20:53:30,319 - 训练文件路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_short\20250322.csv
2025-03-22 20:53:30,320 - 启动预测监视线程
2025-03-22 20:53:30,320 - 模型存储目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:53:30,320 - 训练完成标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\short\logs\auto_pre_train\20250322_train_done.flag
2025-03-22 20:53:30,320 - 开始监视 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_short 文件夹以进行训练...
2025-03-22 20:53:30,320 - 预测数据文件路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv\20250322.csv
2025-03-22 20:53:30,320 - 检测到20250322的训练已经执行过 (标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\short\logs\auto_pre_train\20250322_train_done.flag)
2025-03-22 20:53:30,320 - 模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:53:30,320 - 预测完成标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\short\logs\auto_pre_train\20250322_predict_done.flag
2025-03-22 20:53:30,320 - 开始监视 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv 文件夹以进行预测...
2025-03-22 20:53:30,321 - ⚠️ 检测到今天的训练已经执行过，跳过...
2025-03-22 20:53:30,321 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:53:30,321 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:53:30,321 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models
2025-03-22 20:53:30,321 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models
2025-03-22 20:53:30,321 - 发现GBDT模型文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models\GBDT.joblib
2025-03-22 20:53:30,321 - 发现GBDT模型文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models\GBDT.joblib
2025-03-22 20:53:30,321 - ✅ 模型已设置为可用状态
2025-03-22 20:53:30,322 - ✅ 发现新的预测文件：D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv\20250322.csv，执行预测...
2025-03-22 20:53:30,322 - 
============================================================
【风电功率预测开始】
============================================================
2025-03-22 20:53:30,322 - 配置信息:
2025-03-22 20:53:30,322 -   - 数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv\20250322.csv
2025-03-22 20:53:30,322 -   - 模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322
2025-03-22 20:53:30,322 -   - 窗口大小: 16
2025-03-22 20:53:30,322 -   - 滞后特征数: 4
2025-03-22 20:53:30,322 - 
============================================================
【预处理新数据】
============================================================
2025-03-22 20:53:30,322 - 加载数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\shortcsv\20250322.csv
2025-03-22 20:53:30,330 - 数据加载完成，去除缺失值后共 111 条记录
2025-03-22 20:53:30,388 - 数据前5行预览:
         Timestamp    129.128_1    129.128_2  ...  ws200_13   ws200_14   ws200_15
0  2024/4/16 19:30  15974.26563  16293.82813  ...  9.588719  10.699799  12.128573
1  2024/4/16 19:45  15974.26563  16293.82813  ...  9.553943  10.777429  12.265793
2  2024/4/16 20:00  15974.26563  16293.82813  ...  9.541195  10.863499  12.404554
3  2024/4/16 20:15  15974.26563  16293.82813  ...  9.280917  10.585079  12.259521
4  2024/4/16 20:30  15974.26563  16293.82813  ...  9.020693  10.307371  12.115601

[5 rows x 301 columns]
2025-03-22 20:53:30,388 - 预处理数据...
2025-03-22 20:53:30,391 - 预处理完成，特征维度: (111, 304)
2025-03-22 20:53:30,391 - 执行特征工程，滞后特征数: 4...
2025-03-22 20:53:30,435 - 特征工程完成，特征维度: (108, 859)
2025-03-22 20:53:30,435 - 新数据预处理完成，共 108 个样本
2025-03-22 20:53:30,435 - ✅ 发现最佳模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models，尝试使用多模型加权预测
2025-03-22 20:53:30,435 - 
============================================================
【加载多个模型】
============================================================
2025-03-22 20:53:30,435 - 从目录加载模型和 scaler: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\best_models
2025-03-22 20:53:30,435 - 加载 GBDT 模型和 scaler...
2025-03-22 20:53:30,443 - ✅ 已成功加载 GBDT 模型和对应的 scaler
2025-03-22 20:53:30,443 - 加载 DART 模型和 scaler...
2025-03-22 20:53:30,451 - ✅ 已成功加载 DART 模型和对应的 scaler
2025-03-22 20:53:30,452 - 加载 GOSS 模型和 scaler...
2025-03-22 20:53:30,460 - ✅ 已成功加载 GOSS 模型和对应的 scaler
2025-03-22 20:53:30,460 - 加载完成，共加载了 3 个模型: GBDT, DART, GOSS
2025-03-22 20:53:30,460 - 尝试加载模型权重文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\shortmodel\20250322\model_weights.joblib
2025-03-22 20:53:30,460 - ✅ 已加载模型权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:53:30,461 - 
============================================================
【使用多模型加权预测】
============================================================
2025-03-22 20:53:30,461 - 使用自定义权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:53:30,461 - 使用 GBDT 模型进行预测 (权重: 0.3379)...
2025-03-22 20:53:30,465 - GBDT: 数据标准化完成
2025-03-22 20:53:30,468 - GBDT: 时间窗口创建完成，窗口数量: 93
2025-03-22 20:53:30,520 - ✅ GBDT 模型预测完成，生成了 93 个预测值
2025-03-22 20:53:30,520 -    统计: 最小值=201.69, 最大值=273.76, 平均值=250.31
2025-03-22 20:53:30,520 - 使用 DART 模型进行预测 (权重: 0.1847)...
2025-03-22 20:53:30,523 - DART: 数据标准化完成
2025-03-22 20:53:30,525 - DART: 时间窗口创建完成，窗口数量: 93
2025-03-22 20:53:30,527 - ✅ DART 模型预测完成，生成了 93 个预测值
2025-03-22 20:53:30,528 -    统计: 最小值=160.99, 最大值=218.68, 平均值=199.97
2025-03-22 20:53:30,528 - ❌ GOSS 模型权重为0，跳过
2025-03-22 20:53:30,528 - 所有预测结果对齐到最小长度: 93
2025-03-22 20:53:30,528 - 开始计算加权平均预测结果...
2025-03-22 20:53:30,528 -   加入 GBDT 模型贡献 (权重: 0.3379)
2025-03-22 20:53:30,528 -   加入 DART 模型贡献 (权重: 0.1847)
2025-03-22 20:53:30,528 -   加入常数偏置项 (值: 98.0784)
2025-03-22 20:53:30,528 - 加权平均预测完成，生成了 93 个预测值
2025-03-22 20:53:30,528 - 加权预测结果统计: 最小值=195.95, 最大值=230.83, 平均值=219.58
2025-03-22 20:53:30,528 - ✅ 多模型加权预测完成，使用模型: GBDT, DART, GOSS
2025-03-22 20:53:30,529 - 
============================================================
【保存预测结果】
============================================================
2025-03-22 20:53:30,529 - 创建输出目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\results\shortresult\20250322
2025-03-22 20:53:30,529 - 预测结果数据框创建完成，共 93 行
2025-03-22 20:53:30,531 - ✅ 预测结果已保存到文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\results\shortresult\20250322\20250322.csv
2025-03-22 20:53:30,531 - 尝试将预测结果导入数据库...
2025-03-22 20:53:30,531 - 发送HTTP请求到: http://localhost:5000/prediction2database/batch_shortl_power
2025-03-22 20:53:32,672 - ✅ 数据已成功导入数据库
2025-03-22 20:53:32,672 -    总记录数: 93, 更新: 93, 插入: 0
2025-03-22 20:53:32,672 - ✅ 预测结果已保存到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\results\shortresult\20250322\20250322.csv
2025-03-22 20:53:32,672 - 
============================================================
【风电功率预测完成】
============================================================
2025-03-22 20:53:32,672 - 风电功率预测完成
2025-03-22 20:53:32,674 - 预测完成，已创建标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\short\logs\auto_pre_train\20250322_predict_done.flag
2025-03-22 20:53:32,674 - ✅ 预测执行完成
2025-03-22 20:53:32,674 - 
================================================================================
2025-03-22 20:53:32,674 - >>> 系统任务完成 <<<
2025-03-22 20:53:32,674 - ================================================================================

2025-03-22 20:53:32,674 - 系统任务完成
2025-03-22 20:53:32,675 - 今天的训练和预测任务已完成。

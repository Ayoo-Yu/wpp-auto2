2025-03-22 20:49:14,828 - 
================================================================================
2025-03-22 20:49:14,828 - >>> 自动训练预测系统启动 <<<
2025-03-22 20:49:14,828 - ================================================================================

2025-03-22 20:49:14,828 - 自动训练预测系统启动
2025-03-22 20:49:14,828 - 今天的日期是: 20250322
2025-03-22 20:49:14,829 - 创建监视线程...
2025-03-22 20:49:14,829 - 启动训练线程...
2025-03-22 20:49:14,830 - 启动预测线程...
2025-03-22 20:49:14,830 - 
================================================================================
2025-03-22 20:49:14,830 - >>> 启动训练监视线程 <<<
2025-03-22 20:49:14,830 - ================================================================================

2025-03-22 20:49:14,830 - 等待线程完成...
2025-03-22 20:49:14,831 - 
================================================================================
2025-03-22 20:49:14,835 - 启动训练监视线程
2025-03-22 20:49:14,835 - >>> 启动预测监视线程 <<<
2025-03-22 20:49:14,835 - ================================================================================

2025-03-22 20:49:14,835 - 启动预测监视线程
2025-03-22 20:49:14,836 - 训练文件路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_middle\20250322.csv
2025-03-22 20:49:14,836 - 模型存储目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:49:14,836 - 训练完成标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\middle\logs\auto_pre_train\20250322_train_done.flag
2025-03-22 20:49:14,836 - 开始监视 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_middle 文件夹以进行训练...
2025-03-22 20:49:14,836 - ✅ 发现新的训练文件：D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_middle\20250322.csv，执行训练...
2025-03-22 20:49:14,836 - 
================================================================================
2025-03-22 20:49:14,836 - 预测数据文件路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\middlecsv\20250322.csv
2025-03-22 20:49:14,836 - >>> 开始模型训练 <<<
2025-03-22 20:49:14,836 - 模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:49:14,837 - ================================================================================

2025-03-22 20:49:14,837 - 预测完成标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\middle\logs\auto_pre_train\20250322_predict_done.flag
2025-03-22 20:49:14,837 - 开始监视 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\middlecsv 文件夹以进行预测...
2025-03-22 20:49:14,837 - 配置信息:
2025-03-22 20:49:14,837 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:49:14,837 -   - 窗口大小: 16
2025-03-22 20:49:14,837 - 未找到best_models目录，检查传统模型文件
2025-03-22 20:49:14,837 -   - 滞后特征数: 4
2025-03-22 20:49:14,837 -   - 训练集比例: 0.9
2025-03-22 20:49:14,838 -   - 输出目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\train_predictions\middle_predictions
2025-03-22 20:49:14,838 -   - 模型存储路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:49:14,838 - 未找到任何可用模型文件
2025-03-22 20:49:14,838 - 输出结果将保存到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\train_predictions\middle_predictions
2025-03-22 20:49:14,838 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-22 20:49:14,838 - 
================================================================================
2025-03-22 20:49:14,838 - >>> 数据加载与预处理 <<<
2025-03-22 20:49:14,839 - ================================================================================

2025-03-22 20:49:14,839 - 加载数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_middle\20250322.csv
2025-03-22 20:49:14,839 - 开始加载和预处理数据...
2025-03-22 20:49:15,024 - 数据加载完成，共 2973 条记录
2025-03-22 20:49:15,061 - 数据前5行预览: 
        Timestamp    129.128_1    129.128_2  ...  ws200_15  wp_true    ws_all
0  2024/3/18 0:00  15974.26563  16293.82813  ...  9.731182   227.36  8.047185
1  2024/3/18 0:15  15974.26563  16293.82813  ...  9.603328   247.36  8.295189
2  2024/3/18 0:30  15974.26563  16293.82813  ...  9.476844   255.30  8.392767
3  2024/3/18 0:45  15974.26563  16293.82813  ...  9.351785   267.26  8.539846
4  2024/3/18 1:00  15974.26563  16293.82813  ...  9.228210   279.18  8.687130

[5 rows x 303 columns]
2025-03-22 20:49:15,065 - 数据集时间范围: 2024-03-18 至 2024-04-17, 共 1 个月
2025-03-22 20:49:15,065 - 根据数据集实际时间范围(1个月)，优化months_list: [1, 3, 6, 9, 12, None] -> [1, None]
2025-03-22 20:49:15,066 - 将使用以下时间段训练模型: [1, None]
2025-03-22 20:49:15,066 - 
================================================================================
2025-03-22 20:49:15,066 - >>> 开始多数据集训练 <<<
2025-03-22 20:49:15,066 - ================================================================================

2025-03-22 20:49:15,066 - 将使用多种时间跨度的数据训练模型...
2025-03-22 20:49:15,066 - 
--------------------------------------------------
【使用多个数据集训练模型】
--------------------------------------------------
2025-03-22 20:49:15,066 - 最佳模型将保存到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models
2025-03-22 20:49:15,067 - 获取统一参数成功，包含 3 种模型类型
2025-03-22 20:49:15,067 - 
--------------------------------------------------
【训练数据集: 1个月】
--------------------------------------------------
2025-03-22 20:49:15,067 - 使用1个月的数据进行训练...
2025-03-22 20:49:15,067 - 过滤数据为最近1个月...
2025-03-22 20:49:15,069 - 过滤后的数据量: 2973
2025-03-22 20:49:15,069 - 对1个月数据进行预处理...
2025-03-22 20:49:15,076 - 预处理后的特征维度: (2973, 304), 目标变量维度: (2973,)
2025-03-22 20:49:15,076 - 数据集划分完成，训练集: (2675, 304), 验证集: (298, 304)
2025-03-22 20:49:15,077 - 提取了 298 个验证集时间戳，用于时间加权评估
2025-03-22 20:49:15,077 - 执行特征工程，滞后特征数: 4...
2025-03-22 20:49:15,155 - 特征工程后的特征维度 - 训练集: (2672, 859), 验证集: (295, 859)
2025-03-22 20:49:15,155 - 数据标准化...
2025-03-22 20:49:15,215 - 数据标准化完成
2025-03-22 20:49:15,215 - 创建时间窗口，窗口大小: 16...
2025-03-22 20:49:15,299 - 时间窗口创建完成 - 训练集: (2657, 16, 859), 验证集: (280, 16, 859)
2025-03-22 20:49:15,300 - 调整时间戳长度以匹配窗口化后的验证集 - 原始长度: 298, 目标长度: 280
2025-03-22 20:49:15,300 - 时间戳已截断至匹配窗口化后的验证集长度: 280
2025-03-22 20:49:15,300 - 为1个月数据创建模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\1months
2025-03-22 20:49:15,300 - 开始训练1个月数据的模型...
2025-03-22 20:49:15,300 - 
--------------------------------------------------
【开始模型训练与评估】
--------------------------------------------------
2025-03-22 20:49:15,301 - 模型和 scaler 将被保存到目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\1months
2025-03-22 20:49:15,301 - 
--------------------------------------------------
【训练 GBDT 模型】
--------------------------------------------------
2025-03-22 20:49:15,301 - 模型参数: {'boosting_type': 'gbdt', 'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'name': 'GBDT'}
2025-03-22 20:49:15,301 - 开始训练 GBDT 模型...
2025-03-22 20:49:41,363 - GBDT 模型训练完成
2025-03-22 20:49:41,363 - 使用 GBDT 模型预测验证集...
2025-03-22 20:49:41,372 - 使用时间加权方式计算模型评分...
2025-03-22 20:49:41,373 - GBDT 评估结果 - RMSE: 67.1426, K: 0.4608, 加权评分: 0.6513
2025-03-22 20:49:41,373 - ✅ GBDT 成为当前最佳模型 (基于加权评分)
2025-03-22 20:49:41,387 - GBDT 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\1months\GBDT.joblib
2025-03-22 20:49:41,388 - 
--------------------------------------------------
【训练 DART 模型】
--------------------------------------------------
2025-03-22 20:49:41,388 - 模型参数: {'boosting_type': 'dart', 'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'drop_rate': 0.1, 'name': 'DART'}
2025-03-22 20:49:41,388 - 开始训练 DART 模型...
2025-03-22 20:49:44,842 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:49:44,842 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models
2025-03-22 20:49:44,843 - 未找到GBDT模型文件
2025-03-22 20:49:44,843 - 未找到DART模型文件
2025-03-22 20:49:44,843 - 未找到GOSS模型文件
2025-03-22 20:49:44,844 - 未找到任何可用模型文件
2025-03-22 20:49:44,844 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-22 20:50:08,360 - DART 模型训练完成
2025-03-22 20:50:08,361 - 使用 DART 模型预测验证集...
2025-03-22 20:50:08,368 - 使用时间加权方式计算模型评分...
2025-03-22 20:50:08,370 - DART 评估结果 - RMSE: 62.3280, K: 0.6255, 加权评分: 0.7416
2025-03-22 20:50:08,370 - ✅ DART 成为当前最佳模型 (基于加权评分)
2025-03-22 20:50:08,380 - DART 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\1months\DART.joblib
2025-03-22 20:50:08,380 - 
--------------------------------------------------
【训练 GOSS 模型】
--------------------------------------------------
2025-03-22 20:50:08,380 - 模型参数: {'boosting_type': 'goss', 'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'top_rate': 0.2, 'other_rate': 0.1, 'name': 'GOSS'}
2025-03-22 20:50:08,380 - 开始训练 GOSS 模型...
2025-03-22 20:50:14,848 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:50:14,849 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models
2025-03-22 20:50:14,849 - 未找到GBDT模型文件
2025-03-22 20:50:14,850 - 未找到DART模型文件
2025-03-22 20:50:14,850 - 未找到GOSS模型文件
2025-03-22 20:50:14,850 - 未找到任何可用模型文件
2025-03-22 20:50:14,850 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-22 20:50:30,291 - GOSS 模型训练完成
2025-03-22 20:50:30,291 - 使用 GOSS 模型预测验证集...
2025-03-22 20:50:30,301 - 使用时间加权方式计算模型评分...
2025-03-22 20:50:30,304 - GOSS 评估结果 - RMSE: 68.3105, K: 0.4494, 加权评分: 0.6442
2025-03-22 20:50:30,321 - GOSS 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\1months\GOSS.joblib
2025-03-22 20:50:30,323 - Scaler 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\1months\scaler.joblib
2025-03-22 20:50:30,332 - 最佳模型 'DART' 已额外保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\1months\model.joblib
2025-03-22 20:50:30,332 - 1个月数据的模型训练完成
2025-03-22 20:50:30,332 - 
--------------------------------------------------
【更新每种算法的最佳模型】
--------------------------------------------------
2025-03-22 20:50:30,332 - ✅ 发现更好的GBDT模型 (来自1个月数据)
2025-03-22 20:50:30,332 -    新评分: 0.6513, 旧评分: -inf
2025-03-22 20:50:30,333 - ✅ 发现更好的DART模型 (来自1个月数据)
2025-03-22 20:50:30,333 -    新评分: 0.7416, 旧评分: -inf
2025-03-22 20:50:30,333 - ✅ 发现更好的GOSS模型 (来自1个月数据)
2025-03-22 20:50:30,333 -    新评分: 0.6442, 旧评分: -inf
2025-03-22 20:50:30,333 - 
--------------------------------------------------
【训练数据集: 全部数据】
--------------------------------------------------
2025-03-22 20:50:30,333 - 使用全部数据的数据进行训练...
2025-03-22 20:50:30,333 - 使用全部数据...
2025-03-22 20:50:30,334 - 过滤后的数据量: 2973
2025-03-22 20:50:30,334 - 对全部数据数据进行预处理...
2025-03-22 20:50:30,343 - 预处理后的特征维度: (2973, 304), 目标变量维度: (2973,)
2025-03-22 20:50:30,344 - 数据集划分完成，训练集: (2675, 304), 验证集: (298, 304)
2025-03-22 20:50:30,344 - 提取了 298 个验证集时间戳，用于时间加权评估
2025-03-22 20:50:30,344 - 执行特征工程，滞后特征数: 4...
2025-03-22 20:50:30,466 - 特征工程后的特征维度 - 训练集: (2672, 859), 验证集: (295, 859)
2025-03-22 20:50:30,466 - 数据标准化...
2025-03-22 20:50:30,520 - 数据标准化完成
2025-03-22 20:50:30,520 - 创建时间窗口，窗口大小: 16...
2025-03-22 20:50:30,610 - 时间窗口创建完成 - 训练集: (2657, 16, 859), 验证集: (280, 16, 859)
2025-03-22 20:50:30,610 - 调整时间戳长度以匹配窗口化后的验证集 - 原始长度: 298, 目标长度: 280
2025-03-22 20:50:30,610 - 时间戳已截断至匹配窗口化后的验证集长度: 280
2025-03-22 20:50:30,610 - 为全部数据数据创建模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\all_data
2025-03-22 20:50:30,611 - 开始训练全部数据数据的模型...
2025-03-22 20:50:30,611 - 
--------------------------------------------------
【开始模型训练与评估】
--------------------------------------------------
2025-03-22 20:50:30,611 - 模型和 scaler 将被保存到目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\all_data
2025-03-22 20:50:30,611 - 
--------------------------------------------------
【训练 GBDT 模型】
--------------------------------------------------
2025-03-22 20:50:30,611 - 模型参数: {'boosting_type': 'gbdt', 'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'name': 'GBDT'}
2025-03-22 20:50:30,611 - 开始训练 GBDT 模型...
2025-03-22 20:50:44,858 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:50:44,859 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models
2025-03-22 20:50:44,859 - 未找到GBDT模型文件
2025-03-22 20:50:44,859 - 未找到DART模型文件
2025-03-22 20:50:44,860 - 未找到GOSS模型文件
2025-03-22 20:50:44,860 - 未找到任何可用模型文件
2025-03-22 20:50:44,860 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-22 20:50:56,500 - GBDT 模型训练完成
2025-03-22 20:50:56,500 - 使用 GBDT 模型预测验证集...
2025-03-22 20:50:56,508 - 使用时间加权方式计算模型评分...
2025-03-22 20:50:56,511 - GBDT 评估结果 - RMSE: 67.1426, K: 0.4608, 加权评分: 0.6513
2025-03-22 20:50:56,511 - ✅ GBDT 成为当前最佳模型 (基于加权评分)
2025-03-22 20:50:56,525 - GBDT 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\all_data\GBDT.joblib
2025-03-22 20:50:56,525 - 
--------------------------------------------------
【训练 DART 模型】
--------------------------------------------------
2025-03-22 20:50:56,525 - 模型参数: {'boosting_type': 'dart', 'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'drop_rate': 0.1, 'name': 'DART'}
2025-03-22 20:50:56,525 - 开始训练 DART 模型...
2025-03-22 20:51:13,392 - DART 模型训练完成
2025-03-22 20:51:13,392 - 使用 DART 模型预测验证集...
2025-03-22 20:51:13,400 - 使用时间加权方式计算模型评分...
2025-03-22 20:51:13,403 - DART 评估结果 - RMSE: 62.3280, K: 0.6255, 加权评分: 0.7416
2025-03-22 20:51:13,403 - ✅ DART 成为当前最佳模型 (基于加权评分)
2025-03-22 20:51:13,416 - DART 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\all_data\DART.joblib
2025-03-22 20:51:13,416 - 
--------------------------------------------------
【训练 GOSS 模型】
--------------------------------------------------
2025-03-22 20:51:13,416 - 模型参数: {'boosting_type': 'goss', 'objective': 'regression', 'metric': 'rmse', 'num_leaves': 31, 'learning_rate': 0.05, 'feature_fraction': 0.9, 'top_rate': 0.2, 'other_rate': 0.1, 'name': 'GOSS'}
2025-03-22 20:51:13,416 - 开始训练 GOSS 模型...
2025-03-22 20:51:14,868 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:51:14,868 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models
2025-03-22 20:51:14,868 - 未找到GBDT模型文件
2025-03-22 20:51:14,869 - 未找到DART模型文件
2025-03-22 20:51:14,869 - 未找到GOSS模型文件
2025-03-22 20:51:14,870 - 未找到任何可用模型文件
2025-03-22 20:51:14,870 - ⏳ 未有可用模型，等待模型训练完成...
2025-03-22 20:51:26,766 - GOSS 模型训练完成
2025-03-22 20:51:26,766 - 使用 GOSS 模型预测验证集...
2025-03-22 20:51:26,774 - 使用时间加权方式计算模型评分...
2025-03-22 20:51:26,776 - GOSS 评估结果 - RMSE: 68.3105, K: 0.4494, 加权评分: 0.6442
2025-03-22 20:51:26,792 - GOSS 模型已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\all_data\GOSS.joblib
2025-03-22 20:51:26,794 - Scaler 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\all_data\scaler.joblib
2025-03-22 20:51:26,803 - 最佳模型 'DART' 已额外保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\all_data\model.joblib
2025-03-22 20:51:26,803 - 全部数据数据的模型训练完成
2025-03-22 20:51:26,803 - 
--------------------------------------------------
【更新每种算法的最佳模型】
--------------------------------------------------
2025-03-22 20:51:26,803 - ❌ 全部数据数据的GBDT模型不是最佳模型
2025-03-22 20:51:26,803 -    当前评分: 0.6513, 最佳评分: 0.6513
2025-03-22 20:51:26,803 - ❌ 全部数据数据的DART模型不是最佳模型
2025-03-22 20:51:26,803 -    当前评分: 0.7416, 最佳评分: 0.7416
2025-03-22 20:51:26,803 - ❌ 全部数据数据的GOSS模型不是最佳模型
2025-03-22 20:51:26,803 -    当前评分: 0.6442, 最佳评分: 0.6442
2025-03-22 20:51:26,803 - 
--------------------------------------------------
【保存每种算法的最佳模型】
--------------------------------------------------
2025-03-22 20:51:26,813 - 最佳GBDT模型 (使用1个月数据) 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models\GBDT.joblib
2025-03-22 20:51:26,813 - RMSE: 67.1426, K: 0.4608, 评分: 0.6513
2025-03-22 20:51:26,822 - 最佳DART模型 (使用1个月数据) 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models\DART.joblib
2025-03-22 20:51:26,822 - RMSE: 62.3280, K: 0.6255, 评分: 0.7416
2025-03-22 20:51:26,838 - 最佳GOSS模型 (使用1个月数据) 已保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models\GOSS.joblib
2025-03-22 20:51:26,838 - RMSE: 68.3105, K: 0.4494, 评分: 0.6442
2025-03-22 20:51:26,849 - 多数据集训练完成! 已为每种算法选择最佳模型
2025-03-22 20:51:26,849 -   - 最佳GBDT模型: 使用1个月数据, RMSE=67.1426, K=0.4608, 评分=0.6513
2025-03-22 20:51:26,849 -   - 最佳DART模型: 使用1个月数据, RMSE=62.3280, K=0.6255, 评分=0.7416
2025-03-22 20:51:26,849 -   - 最佳GOSS模型: 使用1个月数据, RMSE=68.3105, K=0.4494, 评分=0.6442
2025-03-22 20:51:26,850 - 
================================================================================
2025-03-22 20:51:26,850 - >>> 开始计算模型权重 <<<
2025-03-22 20:51:26,850 - ================================================================================

2025-03-22 20:51:26,850 - 开始计算模型权重
2025-03-22 20:51:26,850 - 从训练数据集中提取最后三天数据进行权重优化
2025-03-22 20:51:26,851 - ✅ 已从训练数据集提取最后三天数据，共 289 条记录
2025-03-22 20:51:26,851 - 开始计算最优模型权重...
2025-03-22 20:51:26,851 - 
--------------------------------------------------
【计算模型权重】
--------------------------------------------------
2025-03-22 20:51:26,884 - 加载最佳模型和对应的scaler...
2025-03-22 20:51:26,884 - ✅ 已加载 GBDT 模型和scaler
2025-03-22 20:51:26,884 - ✅ 已加载 DART 模型和scaler
2025-03-22 20:51:26,885 - ✅ 已加载 GOSS 模型和scaler
2025-03-22 20:51:26,885 - 预处理验证数据，共 289 条记录...
2025-03-22 20:51:26,888 - 验证数据预处理完成，特征维度: (289, 304)
2025-03-22 20:51:26,945 - 验证数据特征工程完成，特征维度: (286, 859)
2025-03-22 20:51:26,946 - 使用各模型进行预测...
2025-03-22 20:51:26,953 - 使用 GBDT 模型预测...
2025-03-22 20:51:26,960 - ✅ GBDT 模型预测完成，预测结果数量: 271
2025-03-22 20:51:26,969 - 使用 DART 模型预测...
2025-03-22 20:51:26,976 - ✅ DART 模型预测完成，预测结果数量: 271
2025-03-22 20:51:26,985 - 使用 GOSS 模型预测...
2025-03-22 20:51:26,991 - ✅ GOSS 模型预测完成，预测结果数量: 271
2025-03-22 20:51:26,991 - 对齐预测结果，使用最小长度: 271
2025-03-22 20:51:26,991 - 创建线性回归的特征矩阵 (271, 3) 和目标向量 (271,)
2025-03-22 20:51:26,991 - 训练线性回归模型计算最优权重...
2025-03-22 20:51:26,992 - 线性回归得到的权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:51:26,992 - 最终计算的模型权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:51:26,993 - 计算得到的最优权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:51:26,994 - 模型权重已保存到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\model_weights.joblib
2025-03-22 20:51:27,002 - 训练完成，已创建标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\middle\logs\auto_pre_train\20250322_train_done.flag
2025-03-22 20:51:27,002 - ✅ 训练完成，已创建标志文件
2025-03-22 20:51:27,002 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:51:27,002 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models
2025-03-22 20:51:27,002 - 发现GBDT模型文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models\GBDT.joblib
2025-03-22 20:51:27,003 - ✅ 模型已成功保存到 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322，模型可用。
2025-03-22 20:51:44,881 - ✅ 发现新的预测文件：D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\middlecsv\20250322.csv，执行预测...
2025-03-22 20:51:44,881 - 
============================================================
【风电功率预测开始】
============================================================
2025-03-22 20:51:44,881 - 配置信息:
2025-03-22 20:51:44,881 -   - 数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\middlecsv\20250322.csv
2025-03-22 20:51:44,881 -   - 模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:51:44,881 -   - 窗口大小: 16
2025-03-22 20:51:44,881 -   - 滞后特征数: 4
2025-03-22 20:51:44,881 - 
============================================================
【预处理新数据】
============================================================
2025-03-22 20:51:44,881 - 加载数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\middlecsv\20250322.csv
2025-03-22 20:51:44,890 - 数据加载完成，去除缺失值后共 111 条记录
2025-03-22 20:51:44,929 - 数据前5行预览:
         Timestamp    129.128_1    129.128_2  ...   ws200_15  wp_true    ws_all
0  2024/4/16 19:30  15974.26563  16293.82813  ...  12.128573   260.71  8.459232
1  2024/4/16 19:45  15974.26563  16293.82813  ...  12.265793   279.02  8.685149
2  2024/4/16 20:00  15974.26563  16293.82813  ...  12.404554   296.51  8.902384
3  2024/4/16 20:15  15974.26563  16293.82813  ...  12.259521   301.00  8.958328
4  2024/4/16 20:30  15974.26563  16293.82813  ...  12.115601   297.32  8.912472

[5 rows x 303 columns]
2025-03-22 20:51:44,930 - 预处理数据...
2025-03-22 20:51:44,931 - 预处理完成，特征维度: (111, 306)
2025-03-22 20:51:44,931 - 执行特征工程，滞后特征数: 4...
2025-03-22 20:51:44,981 - 特征工程完成，特征维度: (108, 861)
2025-03-22 20:51:44,981 - 新数据预处理完成，共 108 个样本
2025-03-22 20:51:44,982 - ✅ 发现最佳模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models，尝试使用多模型加权预测
2025-03-22 20:51:44,982 - 
============================================================
【加载多个模型】
============================================================
2025-03-22 20:51:44,982 - 从目录加载模型和 scaler: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models
2025-03-22 20:51:44,982 - 加载 GBDT 模型和 scaler...
2025-03-22 20:51:44,990 - ✅ 已成功加载 GBDT 模型和对应的 scaler
2025-03-22 20:51:44,990 - 加载 DART 模型和 scaler...
2025-03-22 20:51:44,998 - ✅ 已成功加载 DART 模型和对应的 scaler
2025-03-22 20:51:44,998 - 加载 GOSS 模型和 scaler...
2025-03-22 20:51:45,004 - ✅ 已成功加载 GOSS 模型和对应的 scaler
2025-03-22 20:51:45,004 - 加载完成，共加载了 3 个模型: GBDT, DART, GOSS
2025-03-22 20:51:45,004 - 尝试加载模型权重文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\model_weights.joblib
2025-03-22 20:51:45,005 - ✅ 已加载模型权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:51:45,005 - 
============================================================
【使用多模型加权预测】
============================================================
2025-03-22 20:51:45,005 - 使用自定义权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:51:45,005 - 使用 GBDT 模型进行预测 (权重: 0.3379)...
2025-03-22 20:51:45,005 - ❌ GBDT 模型预测出错: The feature names should match those that were passed during fit.
Feature names unseen at fit time:
- wp_true
- ws_all

2025-03-22 20:51:45,005 - 使用 DART 模型进行预测 (权重: 0.1847)...
2025-03-22 20:51:45,006 - ❌ DART 模型预测出错: The feature names should match those that were passed during fit.
Feature names unseen at fit time:
- wp_true
- ws_all

2025-03-22 20:51:45,006 - ❌ GOSS 模型权重为0，跳过
2025-03-22 20:51:45,006 - ❌ 所有模型预测均失败
2025-03-22 20:51:45,006 - 
============================================================
【多模型预测失败】
============================================================
2025-03-22 20:51:45,006 - 多模型预测失败
2025-03-22 20:51:45,006 - ❌ 错误信息: 所有模型预测均失败
2025-03-22 20:51:45,006 - 回退到单一模型预测...
2025-03-22 20:51:45,006 - 
============================================================
【加载模型和标准化器】
============================================================
2025-03-22 20:51:45,006 - Scaler 文件未找到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\scaler.joblib
2025-03-22 20:51:45,010 - 
================================================================================
2025-03-22 20:51:45,010 - >>> 系统任务完成 <<<
2025-03-22 20:51:45,010 - ================================================================================

2025-03-22 20:51:45,010 - 系统任务完成
2025-03-22 20:51:45,010 - 今天的训练和预测任务已完成。
2025-03-22 20:53:33,537 - 
================================================================================
2025-03-22 20:53:33,537 - >>> 自动训练预测系统启动 <<<
2025-03-22 20:53:33,537 - ================================================================================

2025-03-22 20:53:33,537 - 自动训练预测系统启动
2025-03-22 20:53:33,537 - 今天的日期是: 20250322
2025-03-22 20:53:33,537 - 创建监视线程...
2025-03-22 20:53:33,537 - 启动训练线程...
2025-03-22 20:53:33,538 - 启动预测线程...
2025-03-22 20:53:33,538 - 
================================================================================
2025-03-22 20:53:33,538 - >>> 启动训练监视线程 <<<
2025-03-22 20:53:33,538 - ================================================================================

2025-03-22 20:53:33,538 - 启动训练监视线程
2025-03-22 20:53:33,538 - 
================================================================================
2025-03-22 20:53:33,538 - >>> 启动预测监视线程 <<<
2025-03-22 20:53:33,538 - 等待线程完成...
2025-03-22 20:53:33,539 - ================================================================================

2025-03-22 20:53:33,539 - 启动预测监视线程
2025-03-22 20:53:33,539 - 训练文件路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_middle\20250322.csv
2025-03-22 20:53:33,539 - 模型存储目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:53:33,539 - 训练完成标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\middle\logs\auto_pre_train\20250322_train_done.flag
2025-03-22 20:53:33,539 - 开始监视 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\dataset\dataset_middle 文件夹以进行训练...
2025-03-22 20:53:33,539 - 预测数据文件路径: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\middlecsv\20250322.csv
2025-03-22 20:53:33,539 - 模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:53:33,539 - 检测到20250322的训练已经执行过 (标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\middle\logs\auto_pre_train\20250322_train_done.flag)
2025-03-22 20:53:33,539 - 预测完成标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\middle\logs\auto_pre_train\20250322_predict_done.flag
2025-03-22 20:53:33,539 - ⚠️ 检测到今天的训练已经执行过，跳过...
2025-03-22 20:53:33,539 - 开始监视 D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\middlecsv 文件夹以进行预测...
2025-03-22 20:53:33,540 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:53:33,540 - 检查模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:53:33,540 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models
2025-03-22 20:53:33,540 - 发现best_models目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models
2025-03-22 20:53:33,540 - 发现GBDT模型文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models\GBDT.joblib
2025-03-22 20:53:33,540 - ✅ 模型已设置为可用状态
2025-03-22 20:53:33,540 - 发现GBDT模型文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models\GBDT.joblib
2025-03-22 20:53:33,540 - ✅ 发现新的预测文件：D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\middlecsv\20250322.csv，执行预测...
2025-03-22 20:53:33,540 - 
============================================================
【风电功率预测开始】
============================================================
2025-03-22 20:53:33,540 - 配置信息:
2025-03-22 20:53:33,540 -   - 数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\middlecsv\20250322.csv
2025-03-22 20:53:33,541 -   - 模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322
2025-03-22 20:53:33,541 -   - 窗口大小: 16
2025-03-22 20:53:33,541 -   - 滞后特征数: 4
2025-03-22 20:53:33,541 - 
============================================================
【预处理新数据】
============================================================
2025-03-22 20:53:33,541 - 加载数据文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\precsv\middlecsv\20250322.csv
2025-03-22 20:53:33,548 - 数据加载完成，去除缺失值后共 111 条记录
2025-03-22 20:53:33,605 - 数据前5行预览:
         Timestamp    129.128_1    129.128_2  ...  ws200_13   ws200_14   ws200_15
0  2024/4/16 19:30  15974.26563  16293.82813  ...  9.588719  10.699799  12.128573
1  2024/4/16 19:45  15974.26563  16293.82813  ...  9.553943  10.777429  12.265793
2  2024/4/16 20:00  15974.26563  16293.82813  ...  9.541195  10.863499  12.404554
3  2024/4/16 20:15  15974.26563  16293.82813  ...  9.280917  10.585079  12.259521
4  2024/4/16 20:30  15974.26563  16293.82813  ...  9.020693  10.307371  12.115601

[5 rows x 301 columns]
2025-03-22 20:53:33,605 - 预处理数据...
2025-03-22 20:53:33,608 - 预处理完成，特征维度: (111, 304)
2025-03-22 20:53:33,608 - 执行特征工程，滞后特征数: 4...
2025-03-22 20:53:33,639 - 特征工程完成，特征维度: (108, 859)
2025-03-22 20:53:33,639 - 新数据预处理完成，共 108 个样本
2025-03-22 20:53:33,640 - ✅ 发现最佳模型目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models，尝试使用多模型加权预测
2025-03-22 20:53:33,640 - 
============================================================
【加载多个模型】
============================================================
2025-03-22 20:53:33,640 - 从目录加载模型和 scaler: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\best_models
2025-03-22 20:53:33,640 - 加载 GBDT 模型和 scaler...
2025-03-22 20:53:33,647 - ✅ 已成功加载 GBDT 模型和对应的 scaler
2025-03-22 20:53:33,648 - 加载 DART 模型和 scaler...
2025-03-22 20:53:33,655 - ✅ 已成功加载 DART 模型和对应的 scaler
2025-03-22 20:53:33,656 - 加载 GOSS 模型和 scaler...
2025-03-22 20:53:33,663 - ✅ 已成功加载 GOSS 模型和对应的 scaler
2025-03-22 20:53:33,664 - 加载完成，共加载了 3 个模型: GBDT, DART, GOSS
2025-03-22 20:53:33,664 - 尝试加载模型权重文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\models\middlemodel\20250322\model_weights.joblib
2025-03-22 20:53:33,664 - ✅ 已加载模型权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:53:33,664 - 
============================================================
【使用多模型加权预测】
============================================================
2025-03-22 20:53:33,664 - 使用自定义权重: {'GBDT': np.float64(0.3378826776996291), 'DART': np.float64(0.18465658902121768), 'GOSS': np.float64(0.0), 'INTERCEPT': np.float64(98.07836551790079)}
2025-03-22 20:53:33,664 - 使用 GBDT 模型进行预测 (权重: 0.3379)...
2025-03-22 20:53:33,669 - GBDT: 数据标准化完成
2025-03-22 20:53:33,671 - GBDT: 时间窗口创建完成，窗口数量: 93
2025-03-22 20:53:33,722 - ✅ GBDT 模型预测完成，生成了 93 个预测值
2025-03-22 20:53:33,722 -    统计: 最小值=201.69, 最大值=273.76, 平均值=250.31
2025-03-22 20:53:33,722 - 使用 DART 模型进行预测 (权重: 0.1847)...
2025-03-22 20:53:33,725 - DART: 数据标准化完成
2025-03-22 20:53:33,727 - DART: 时间窗口创建完成，窗口数量: 93
2025-03-22 20:53:33,730 - ✅ DART 模型预测完成，生成了 93 个预测值
2025-03-22 20:53:33,730 -    统计: 最小值=160.99, 最大值=218.68, 平均值=199.97
2025-03-22 20:53:33,731 - ❌ GOSS 模型权重为0，跳过
2025-03-22 20:53:33,731 - 所有预测结果对齐到最小长度: 93
2025-03-22 20:53:33,731 - 开始计算加权平均预测结果...
2025-03-22 20:53:33,731 -   加入 GBDT 模型贡献 (权重: 0.3379)
2025-03-22 20:53:33,731 -   加入 DART 模型贡献 (权重: 0.1847)
2025-03-22 20:53:33,731 -   加入常数偏置项 (值: 98.0784)
2025-03-22 20:53:33,731 - 加权平均预测完成，生成了 93 个预测值
2025-03-22 20:53:33,731 - 加权预测结果统计: 最小值=195.95, 最大值=230.83, 平均值=219.58
2025-03-22 20:53:33,731 - ✅ 多模型加权预测完成，使用模型: GBDT, DART, GOSS
2025-03-22 20:53:33,731 - 
============================================================
【保存预测结果】
============================================================
2025-03-22 20:53:33,732 - 创建输出目录: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\results\middleresult\20250322
2025-03-22 20:53:33,732 - 预测结果数据框创建完成，共 93 行
2025-03-22 20:53:33,738 - ✅ 预测结果已保存到文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\results\middleresult\20250322\20250322.csv
2025-03-22 20:53:33,738 - 尝试将预测结果导入数据库...
2025-03-22 20:53:33,738 - 发送HTTP请求到: http://localhost:5000/prediction2database/batch_middle_power
2025-03-22 20:53:35,771 - ❌ 调用数据库接口失败: Expecting value: line 1 column 1 (char 0)
2025-03-22 20:53:35,771 - ✅ 预测结果已保存到: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\results\middleresult\20250322\20250322.csv
2025-03-22 20:53:35,771 - 
============================================================
【风电功率预测完成】
============================================================
2025-03-22 20:53:35,771 - 风电功率预测完成
2025-03-22 20:53:35,774 - 预测完成，已创建标志文件: D:\my-vue-project\wind-power-forecast\backend\auto_scripts\scripts\middle\logs\auto_pre_train\20250322_predict_done.flag
2025-03-22 20:53:35,774 - ✅ 预测执行完成
2025-03-22 20:53:35,774 - 
================================================================================
2025-03-22 20:53:35,774 - >>> 系统任务完成 <<<
2025-03-22 20:53:35,774 - ================================================================================

2025-03-22 20:53:35,774 - 系统任务完成
2025-03-22 20:53:35,774 - 今天的训练和预测任务已完成。
